var Zl=Object.defineProperty;var Rr=e=>{throw TypeError(e)};var Jl=(e,t,n)=>t in e?Zl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Gt=(e,t,n)=>Jl(e,typeof t!="symbol"?t+"":t,n),jo=(e,t,n)=>t.has(e)||Rr("Cannot "+n);var m=(e,t,n)=>(jo(e,t,"read from private field"),n?n.call(e):t.get(e)),re=(e,t,n)=>t.has(e)?Rr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),oe=(e,t,n,r)=>(jo(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Ze=(e,t,n)=>(jo(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}})();const Ql="5";var Hr;typeof window<"u"&&((Hr=window.__svelte??(window.__svelte={})).v??(Hr.v=new Set)).add(Ql);const es=1,ts=2,Vr=4,ns=8,os=16,zr=1,rs=2,ze=Symbol(),ls="http://www.w3.org/1999/xhtml",Qo=!1;var Wr=Array.isArray,ss=Array.prototype.indexOf,Qn=Array.prototype.includes,Fo=Array.from,jr=Object.defineProperty,uo=Object.getOwnPropertyDescriptor,is=Object.getOwnPropertyDescriptors,as=Object.prototype,cs=Array.prototype,qr=Object.getPrototypeOf,Br=Object.isExtensible;const dn=()=>{};function Kr(e){for(var t=0;t<e.length;t++)e[t]()}function Zr(){var e,t,n=new Promise((r,l)=>{e=r,t=l});return{promise:n,resolve:e,reject:t}}const je=2,$o=4,Po=8,Jr=1<<24,nn=16,Ut=32,Xn=64,hr=128,Et=512,Me=1024,qe=2048,At=4096,ft=8192,_n=16384,br=32768,$n=65536,Lr=1<<17,Qr=1<<18,ro=1<<19,us=1<<20,en=1<<25,An=32768,er=1<<21,gr=1<<22,vn=1<<23,Ro=Symbol("$state"),fs=Symbol(""),Yn=new class extends Error{constructor(){super(...arguments);Gt(this,"name","StaleReactionError");Gt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function ds(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function _s(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function vs(e,t,n){throw new Error("https://svelte.dev/e/each_key_duplicate")}function ps(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function hs(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function bs(e){throw new Error("https://svelte.dev/e/effect_orphan")}function gs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ts(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ms(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ys(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Es(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function xs(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function el(e){return e===this.v}function tl(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function nl(e){return!tl(e,this.v)}let ws=!1,dt=null;function eo(e){dt=e}function ye(e,t=!1,n){dt={p:dt,i:!1,c:null,e:null,s:e,x:null,l:null}}function Ee(e){var t=dt,n=t.e;if(n!==null){t.e=null;for(var r of n)xl(r)}return t.i=!0,dt=t.p,{}}function ol(){return!0}let En=[];function rl(){var e=En;En=[],Kr(e)}function tn(e){if(En.length===0&&!fo){var t=En;queueMicrotask(()=>{t===En&&rl()})}En.push(e)}function Ns(){for(;En.length>0;)rl()}function ll(e){var t=be;if(t===null)return ie.f|=vn,e;if((t.f&br)===0){if((t.f&hr)===0)throw e;t.b.error(e)}else to(e,t)}function to(e,t){for(;t!==null;){if((t.f&hr)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Os=-7169;function Ue(e,t){e.f=e.f&Os|t}function Tr(e){(e.f&Et)!==0||e.deps===null?Ue(e,Me):Ue(e,At)}function sl(e){if(e!==null)for(const t of e)(t.f&je)===0||(t.f&An)===0||(t.f^=An,sl(t.deps))}function il(e,t,n){(e.f&qe)!==0?t.add(e):(e.f&At)!==0&&n.add(e),sl(e.deps),Ue(e,Me)}const Co=new Set;let le=null,tr=null,We=null,rt=[],Mo=null,nr=!1,fo=!1;var zn,Wn,wn,jn,go,To,Nn,Kt,qn,zt,or,rr,al;const Cr=class Cr{constructor(){re(this,zt);Gt(this,"committed",!1);Gt(this,"current",new Map);Gt(this,"previous",new Map);re(this,zn,new Set);re(this,Wn,new Set);re(this,wn,0);re(this,jn,0);re(this,go,null);re(this,To,new Set);re(this,Nn,new Set);re(this,Kt,new Map);Gt(this,"is_fork",!1);re(this,qn,!1)}is_deferred(){return this.is_fork||m(this,jn)>0}skip_effect(t){m(this,Kt).has(t)||m(this,Kt).set(t,{d:[],m:[]})}unskip_effect(t){var n=m(this,Kt).get(t);if(n){m(this,Kt).delete(t);for(var r of n.d)Ue(r,qe),Lt(r);for(r of n.m)Ue(r,At),Lt(r)}}process(t){var l;rt=[],this.apply();var n=[],r=[];for(const s of t)Ze(this,zt,or).call(this,s,n,r);if(this.is_deferred()){Ze(this,zt,rr).call(this,r),Ze(this,zt,rr).call(this,n);for(const[s,a]of m(this,Kt))dl(s,a)}else{for(const s of m(this,zn))s();m(this,zn).clear(),m(this,wn)===0&&Ze(this,zt,al).call(this),tr=this,le=null,Dr(r),Dr(n),tr=null,(l=m(this,go))==null||l.resolve()}We=null}capture(t,n){n!==ze&&!this.previous.has(t)&&this.previous.set(t,n),(t.f&vn)===0&&(this.current.set(t,t.v),We==null||We.set(t,t.v))}activate(){le=this,this.apply()}deactivate(){le===this&&(le=null,We=null)}flush(){if(this.activate(),rt.length>0){if(cl(),le!==null&&le!==this)return}else m(this,wn)===0&&this.process([]);this.deactivate()}discard(){for(const t of m(this,Wn))t(this);m(this,Wn).clear()}increment(t){oe(this,wn,m(this,wn)+1),t&&oe(this,jn,m(this,jn)+1)}decrement(t){oe(this,wn,m(this,wn)-1),t&&oe(this,jn,m(this,jn)-1),!m(this,qn)&&(oe(this,qn,!0),tn(()=>{oe(this,qn,!1),this.is_deferred()?rt.length>0&&this.flush():this.revive()}))}revive(){for(const t of m(this,To))m(this,Nn).delete(t),Ue(t,qe),Lt(t);for(const t of m(this,Nn))Ue(t,At),Lt(t);this.flush()}oncommit(t){m(this,zn).add(t)}ondiscard(t){m(this,Wn).add(t)}settled(){return(m(this,go)??oe(this,go,Zr())).promise}static ensure(){if(le===null){const t=le=new Cr;Co.add(le),fo||tn(()=>{le===t&&t.flush()})}return le}apply(){}};zn=new WeakMap,Wn=new WeakMap,wn=new WeakMap,jn=new WeakMap,go=new WeakMap,To=new WeakMap,Nn=new WeakMap,Kt=new WeakMap,qn=new WeakMap,zt=new WeakSet,or=function(t,n,r){t.f^=Me;for(var l=t.first,s=null;l!==null;){var a=l.f,c=(a&(Ut|Xn))!==0,i=c&&(a&Me)!==0,u=i||(a&ft)!==0||m(this,Kt).has(l);if(!u&&l.fn!==null){c?l.f^=Me:s!==null&&(a&($o|Po|Jr))!==0?s.b.defer_effect(l):(a&$o)!==0?n.push(l):wo(l)&&((a&nn)!==0&&m(this,Nn).add(l),ho(l));var d=l.first;if(d!==null){l=d;continue}}var p=l.parent;for(l=l.next;l===null&&p!==null;)p===s&&(s=null),l=p.next,p=p.parent}},rr=function(t){for(var n=0;n<t.length;n+=1)il(t[n],m(this,To),m(this,Nn))},al=function(){var l;if(Co.size>1){this.previous.clear();var t=We,n=!0;for(const s of Co){if(s===this){n=!1;continue}const a=[];for(const[i,u]of this.current){if(s.current.has(i))if(n&&u!==s.current.get(i))s.current.set(i,u);else continue;a.push(i)}if(a.length===0)continue;const c=[...s.current.keys()].filter(i=>!this.current.has(i));if(c.length>0){var r=rt;rt=[];const i=new Set,u=new Map;for(const d of a)ul(d,c,i,u);if(rt.length>0){le=s,s.apply();for(const d of rt)Ze(l=s,zt,or).call(l,d,[],[]);s.deactivate()}rt=r}}le=null,We=t}this.committed=!0,Co.delete(this)};let pn=Cr;function ks(e){var t=fo;fo=!0;try{for(var n;;){if(Ns(),rt.length===0&&(le==null||le.flush(),rt.length===0))return Mo=null,n;cl()}}finally{fo=t}}function cl(){nr=!0;var e=null;try{for(var t=0;rt.length>0;){var n=pn.ensure();if(t++>1e3){var r,l;Cs()}n.process(rt),hn.clear()}}finally{rt=[],nr=!1,Mo=null}}function Cs(){try{gs()}catch(e){to(e,Mo)}}let Rt=null;function Dr(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(_n|ft))===0&&wo(r)&&(Rt=new Set,ho(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?Ol(r):r.fn=null),(Rt==null?void 0:Rt.size)>0)){hn.clear();for(const l of Rt){if((l.f&(_n|ft))!==0)continue;const s=[l];let a=l.parent;for(;a!==null;)Rt.has(a)&&(Rt.delete(a),s.push(a)),a=a.parent;for(let c=s.length-1;c>=0;c--){const i=s[c];(i.f&(_n|ft))===0&&ho(i)}}Rt.clear()}}Rt=null}}function ul(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const l of e.reactions){const s=l.f;(s&je)!==0?ul(l,t,n,r):(s&(gr|nn))!==0&&(s&qe)===0&&fl(l,t,r)&&(Ue(l,qe),Lt(l))}}function fl(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const l of e.deps){if(Qn.call(t,l))return!0;if((l.f&je)!==0&&fl(l,t,n))return n.set(l,!0),!0}return n.set(e,!1),!1}function Lt(e){for(var t=Mo=e;t.parent!==null;){t=t.parent;var n=t.f;if(nr&&t===be&&(n&nn)!==0&&(n&Qr)===0)return;if((n&(Xn|Ut))!==0){if((n&Me)===0)return;t.f^=Me}}rt.push(t)}function dl(e,t){if(!((e.f&Ut)!==0&&(e.f&Me)!==0)){(e.f&qe)!==0?t.d.push(e):(e.f&At)!==0&&t.m.push(e),Ue(e,Me);for(var n=e.first;n!==null;)dl(n,t),n=n.next}}function Rs(e){let t=0,n=Un(0),r;return()=>{Er()&&(o(n),Ho(()=>(t===0&&(r=lo(()=>e(()=>_o(n)))),t+=1,()=>{tn(()=>{t-=1,t===0&&(r==null||r(),r=void 0,_o(n))})})))}}var Bs=$n|ro|hr;function Ls(e,t,n){new Ds(e,t,n)}var bt,pr,Xt,On,Ft,gt,nt,Pt,Zt,cn,kn,un,Kn,Cn,Zn,Jn,Jt,Go,Ye,$s,As,lr,Bo,Lo,sr;class Ds{constructor(t,n,r){re(this,Ye);Gt(this,"parent");Gt(this,"is_pending",!1);re(this,bt);re(this,pr,null);re(this,Xt);re(this,On);re(this,Ft);re(this,gt,null);re(this,nt,null);re(this,Pt,null);re(this,Zt,null);re(this,cn,null);re(this,kn,0);re(this,un,0);re(this,Kn,!1);re(this,Cn,!1);re(this,Zn,new Set);re(this,Jn,new Set);re(this,Jt,null);re(this,Go,Rs(()=>(oe(this,Jt,Un(m(this,kn))),()=>{oe(this,Jt,null)})));oe(this,bt,t),oe(this,Xt,n),oe(this,On,r),this.parent=be.b,this.is_pending=!!m(this,Xt).pending,oe(this,Ft,Vo(()=>{be.b=this;{var l=Ze(this,Ye,lr).call(this);try{oe(this,gt,Tt(()=>r(l)))}catch(s){this.error(s)}m(this,un)>0?Ze(this,Ye,Lo).call(this):this.is_pending=!1}return()=>{var s;(s=m(this,cn))==null||s.remove()}},Bs))}defer_effect(t){il(t,m(this,Zn),m(this,Jn))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!m(this,Xt).pending}update_pending_count(t){Ze(this,Ye,sr).call(this,t),oe(this,kn,m(this,kn)+t),!(!m(this,Jt)||m(this,Kn))&&(oe(this,Kn,!0),tn(()=>{oe(this,Kn,!1),m(this,Jt)&&no(m(this,Jt),m(this,kn))}))}get_effect_pending(){return m(this,Go).call(this),o(m(this,Jt))}error(t){var n=m(this,Xt).onerror;let r=m(this,Xt).failed;if(m(this,Cn)||!n&&!r)throw t;m(this,gt)&&(st(m(this,gt)),oe(this,gt,null)),m(this,nt)&&(st(m(this,nt)),oe(this,nt,null)),m(this,Pt)&&(st(m(this,Pt)),oe(this,Pt,null));var l=!1,s=!1;const a=()=>{if(l){xs();return}l=!0,s&&Es(),pn.ensure(),oe(this,kn,0),m(this,Pt)!==null&&Bn(m(this,Pt),()=>{oe(this,Pt,null)}),this.is_pending=this.has_pending_snippet(),oe(this,gt,Ze(this,Ye,Bo).call(this,()=>(oe(this,Cn,!1),Tt(()=>m(this,On).call(this,m(this,bt)))))),m(this,un)>0?Ze(this,Ye,Lo).call(this):this.is_pending=!1};tn(()=>{try{s=!0,n==null||n(t,a),s=!1}catch(c){to(c,m(this,Ft)&&m(this,Ft).parent)}r&&oe(this,Pt,Ze(this,Ye,Bo).call(this,()=>{pn.ensure(),oe(this,Cn,!0);try{return Tt(()=>{r(m(this,bt),()=>t,()=>a)})}catch(c){return to(c,m(this,Ft).parent),null}finally{oe(this,Cn,!1)}}))})}}bt=new WeakMap,pr=new WeakMap,Xt=new WeakMap,On=new WeakMap,Ft=new WeakMap,gt=new WeakMap,nt=new WeakMap,Pt=new WeakMap,Zt=new WeakMap,cn=new WeakMap,kn=new WeakMap,un=new WeakMap,Kn=new WeakMap,Cn=new WeakMap,Zn=new WeakMap,Jn=new WeakMap,Jt=new WeakMap,Go=new WeakMap,Ye=new WeakSet,$s=function(){try{oe(this,gt,Tt(()=>m(this,On).call(this,m(this,bt))))}catch(t){this.error(t)}},As=function(){const t=m(this,Xt).pending;t&&(oe(this,nt,Tt(()=>t(m(this,bt)))),tn(()=>{var n=Ze(this,Ye,lr).call(this);oe(this,gt,Ze(this,Ye,Bo).call(this,()=>(pn.ensure(),Tt(()=>m(this,On).call(this,n))))),m(this,un)>0?Ze(this,Ye,Lo).call(this):(Bn(m(this,nt),()=>{oe(this,nt,null)}),this.is_pending=!1)}))},lr=function(){var t=m(this,bt);return this.is_pending&&(oe(this,cn,bn()),m(this,bt).before(m(this,cn)),t=m(this,cn)),t},Bo=function(t){var n=be,r=ie,l=dt;Vt(m(this,Ft)),wt(m(this,Ft)),eo(m(this,Ft).ctx);try{return t()}catch(s){return ll(s),null}finally{Vt(n),wt(r),eo(l)}},Lo=function(){const t=m(this,Xt).pending;m(this,gt)!==null&&(oe(this,Zt,document.createDocumentFragment()),m(this,Zt).append(m(this,cn)),Rl(m(this,gt),m(this,Zt))),m(this,nt)===null&&oe(this,nt,Tt(()=>t(m(this,bt))))},sr=function(t){var n;if(!this.has_pending_snippet()){this.parent&&Ze(n=this.parent,Ye,sr).call(n,t);return}if(oe(this,un,m(this,un)+t),m(this,un)===0){this.is_pending=!1;for(const r of m(this,Zn))Ue(r,qe),Lt(r);for(const r of m(this,Jn))Ue(r,At),Lt(r);m(this,Zn).clear(),m(this,Jn).clear(),m(this,nt)&&Bn(m(this,nt),()=>{oe(this,nt,null)}),m(this,Zt)&&(m(this,bt).before(m(this,Zt)),oe(this,Zt,null))}};function Us(e,t,n,r){const l=mr;var s=e.filter(_=>!_.settled);if(n.length===0&&s.length===0){r(t.map(l));return}var a=le,c=be,i=Ss(),u=s.length===1?s[0].promise:s.length>1?Promise.all(s.map(_=>_.promise)):null;function d(_){i();try{r(_)}catch(y){(c.f&_n)===0&&to(y,c)}a==null||a.deactivate(),ir()}if(n.length===0){u.then(()=>d(t.map(l)));return}function p(){i(),Promise.all(n.map(_=>Is(_))).then(_=>d([...t.map(l),..._])).catch(_=>to(_,c))}u?u.then(p):p()}function Ss(){var e=be,t=ie,n=dt,r=le;return function(s=!0){Vt(e),wt(t),eo(n),s&&(r==null||r.activate())}}function ir(){Vt(null),wt(null),eo(null)}function mr(e){var t=je|qe,n=ie!==null&&(ie.f&je)!==0?ie:null;return be!==null&&(be.f|=ro),{ctx:dt,deps:null,effects:null,equals:el,f:t,fn:e,reactions:null,rv:0,v:ze,wv:0,parent:n??be,ac:null}}function Is(e,t,n){let r=be;r===null&&_s();var l=r.b,s=void 0,a=Un(ze),c=!ie,i=new Map;return js(()=>{var y;var u=Zr();s=u.promise;try{Promise.resolve(e()).then(u.resolve,u.reject).then(()=>{d===le&&d.committed&&d.deactivate(),ir()})}catch(f){u.reject(f),ir()}var d=le;if(c){var p=l.is_rendered();l.update_pending_count(1),d.increment(p),(y=i.get(d))==null||y.reject(Yn),i.delete(d),i.set(d,u)}const _=(f,T=void 0)=>{if(d.activate(),T)T!==Yn&&(a.f|=vn,no(a,T));else{(a.f&vn)!==0&&(a.f^=vn),no(a,f);for(const[v,b]of i){if(i.delete(v),v===d)break;b.reject(Yn)}}c&&(l.update_pending_count(-1),d.decrement(p))};u.promise.then(_,f=>_(null,f||"unknown"))}),xr(()=>{for(const u of i.values())u.reject(Yn)}),new Promise(u=>{function d(p){function _(){p===s?u(a):d(s)}p.then(_,_)}d(s)})}function Y(e){const t=mr(e);return Bl(t),t}function Gs(e){const t=mr(e);return t.equals=nl,t}function _l(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)st(t[n])}}function Xs(e){for(var t=e.parent;t!==null;){if((t.f&je)===0)return(t.f&_n)===0?t:null;t=t.parent}return null}function yr(e){var t,n=be;Vt(Xs(e));try{e.f&=~An,_l(e),t=Al(e)}finally{Vt(n)}return t}function vl(e){var t=yr(e);if(!e.equals(t)&&(e.wv=Dl(),(!(le!=null&&le.is_fork)||e.deps===null)&&(e.v=t,e.deps===null))){Ue(e,Me);return}Sn||(We!==null?(Er()||le!=null&&le.is_fork)&&We.set(e,t):Tr(e))}let ar=new Set;const hn=new Map;let pl=!1;function Un(e,t){var n={f:0,v:e,reactions:null,equals:el,rv:0,wv:0};return n}function te(e,t){const n=Un(e);return Bl(n),n}function hl(e,t=!1,n=!0){const r=Un(e);return t||(r.equals=nl),r}function F(e,t,n=!1){ie!==null&&(!Dt||(ie.f&Lr)!==0)&&ol()&&(ie.f&(je|nn|gr|Lr))!==0&&(xt===null||!Qn.call(xt,e))&&ys();let r=n?ut(t):t;return no(e,r)}function no(e,t){if(!e.equals(t)){var n=e.v;Sn?hn.set(e,t):hn.set(e,n),e.v=t;var r=pn.ensure();if(r.capture(e,n),(e.f&je)!==0){const l=e;(e.f&qe)!==0&&yr(l),Tr(l)}e.wv=Dl(),bl(e,qe),be!==null&&(be.f&Me)!==0&&(be.f&(Ut|Xn))===0&&(ht===null?Zs([e]):ht.push(e)),!r.is_fork&&ar.size>0&&!pl&&Fs()}return t}function Fs(){pl=!1;for(const e of ar)(e.f&Me)!==0&&Ue(e,At),wo(e)&&ho(e);ar.clear()}function _o(e){F(e,e.v+1)}function bl(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,l=0;l<r;l++){var s=n[l],a=s.f,c=(a&qe)===0;if(c&&Ue(s,t),(a&je)!==0){var i=s;We==null||We.delete(i),(a&An)===0&&(a&Et&&(s.f|=An),bl(i,At))}else c&&((a&nn)!==0&&Rt!==null&&Rt.add(s),Lt(s))}}function ut(e){if(typeof e!="object"||e===null||Ro in e)return e;const t=qr(e);if(t!==as&&t!==cs)return e;var n=new Map,r=Wr(e),l=te(0),s=Ln,a=c=>{if(Ln===s)return c();var i=ie,u=Ln;wt(null),Ur(s);var d=c();return wt(i),Ur(u),d};return r&&n.set("length",te(e.length)),new Proxy(e,{defineProperty(c,i,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Ts();var d=n.get(i);return d===void 0?d=a(()=>{var p=te(u.value);return n.set(i,p),p}):F(d,u.value,!0),!0},deleteProperty(c,i){var u=n.get(i);if(u===void 0){if(i in c){const d=a(()=>te(ze));n.set(i,d),_o(l)}}else F(u,ze),_o(l);return!0},get(c,i,u){var y;if(i===Ro)return e;var d=n.get(i),p=i in c;if(d===void 0&&(!p||(y=uo(c,i))!=null&&y.writable)&&(d=a(()=>{var f=ut(p?c[i]:ze),T=te(f);return T}),n.set(i,d)),d!==void 0){var _=o(d);return _===ze?void 0:_}return Reflect.get(c,i,u)},getOwnPropertyDescriptor(c,i){var u=Reflect.getOwnPropertyDescriptor(c,i);if(u&&"value"in u){var d=n.get(i);d&&(u.value=o(d))}else if(u===void 0){var p=n.get(i),_=p==null?void 0:p.v;if(p!==void 0&&_!==ze)return{enumerable:!0,configurable:!0,value:_,writable:!0}}return u},has(c,i){var _;if(i===Ro)return!0;var u=n.get(i),d=u!==void 0&&u.v!==ze||Reflect.has(c,i);if(u!==void 0||be!==null&&(!d||(_=uo(c,i))!=null&&_.writable)){u===void 0&&(u=a(()=>{var y=d?ut(c[i]):ze,f=te(y);return f}),n.set(i,u));var p=o(u);if(p===ze)return!1}return d},set(c,i,u,d){var w;var p=n.get(i),_=i in c;if(r&&i==="length")for(var y=u;y<p.v;y+=1){var f=n.get(y+"");f!==void 0?F(f,ze):y in c&&(f=a(()=>te(ze)),n.set(y+"",f))}if(p===void 0)(!_||(w=uo(c,i))!=null&&w.writable)&&(p=a(()=>te(void 0)),F(p,ut(u)),n.set(i,p));else{_=p.v!==ze;var T=a(()=>ut(u));F(p,T)}var v=Reflect.getOwnPropertyDescriptor(c,i);if(v!=null&&v.set&&v.set.call(d,u),!_){if(r&&typeof i=="string"){var b=n.get("length"),x=Number(i);Number.isInteger(x)&&x>=b.v&&F(b,x+1)}_o(l)}return!0},ownKeys(c){o(l);var i=Reflect.ownKeys(c).filter(p=>{var _=n.get(p);return _===void 0||_.v!==ze});for(var[u,d]of n)d.v!==ze&&!(u in c)&&i.push(u);return i},setPrototypeOf(){ms()}})}var po,gl,Tl,ml;function Ps(){if(po===void 0){po=window,gl=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Tl=uo(t,"firstChild").get,ml=uo(t,"nextSibling").get,Br(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Br(n)&&(n.__t=void 0)}}function bn(e=""){return document.createTextNode(e)}function Qt(e){return Tl.call(e)}function Eo(e){return ml.call(e)}function E(e,t){return Qt(e)}function Le(e,t=!1){{var n=Qt(e);return n instanceof Comment&&n.data===""?Eo(n):n}}function g(e,t=1,n=!1){let r=e;for(;t--;)r=Eo(r);return r}function Ms(e){e.textContent=""}function yl(){return!1}let $r=!1;function Ys(){$r||($r=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function Yo(e){var t=ie,n=be;wt(null),Vt(null);try{return e()}finally{wt(t),Vt(n)}}function El(e,t,n,r=n){e.addEventListener(t,()=>Yo(n));const l=e.__on_r;l?e.__on_r=()=>{l(),r(!0)}:e.__on_r=()=>r(!0),Ys()}function Hs(e){be===null&&(ie===null&&bs(),hs()),Sn&&ps()}function Vs(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function on(e,t,n){var r=be;r!==null&&(r.f&ft)!==0&&(e|=ft);var l={ctx:dt,deps:null,nodes:null,f:e|qe|Et,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{ho(l),l.f|=br}catch(c){throw st(l),c}else t!==null&&Lt(l);var s=l;if(n&&s.deps===null&&s.teardown===null&&s.nodes===null&&s.first===s.last&&(s.f&ro)===0&&(s=s.first,(e&nn)!==0&&(e&$n)!==0&&s!==null&&(s.f|=$n)),s!==null&&(s.parent=r,r!==null&&Vs(s,r),ie!==null&&(ie.f&je)!==0&&(e&Xn)===0)){var a=ie;(a.effects??(a.effects=[])).push(s)}return l}function Er(){return ie!==null&&!Dt}function xr(e){const t=on(Po,null,!1);return Ue(t,Me),t.teardown=e,t}function xo(e){Hs();var t=be.f,n=!ie&&(t&Ut)!==0&&(t&br)===0;if(n){var r=dt;(r.e??(r.e=[])).push(e)}else return xl(e)}function xl(e){return on($o|us,e,!1)}function zs(e){pn.ensure();const t=on(Xn|ro,e,!0);return(n={})=>new Promise(r=>{n.outro?Bn(t,()=>{st(t),r(void 0)}):(st(t),r(void 0))})}function Ws(e){return on($o,e,!1)}function js(e){return on(gr|ro,e,!0)}function Ho(e,t=0){return on(Po|t,e,!0)}function j(e,t=[],n=[],r=[]){Us(r,t,n,l=>{on(Po,()=>e(...l.map(o)),!0)})}function Vo(e,t=0){var n=on(nn|t,e,!0);return n}function Tt(e){return on(Ut|ro,e,!0)}function wl(e){var t=e.teardown;if(t!==null){const n=Sn,r=ie;Ar(!0),wt(null);try{t.call(null)}finally{Ar(n),wt(r)}}}function Nl(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const l=n.ac;l!==null&&Yo(()=>{l.abort(Yn)});var r=n.next;(n.f&Xn)!==0?n.parent=null:st(n,t),n=r}}function qs(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Ut)===0&&st(t),t=n}}function st(e,t=!0){var n=!1;(t||(e.f&Qr)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Ks(e.nodes.start,e.nodes.end),n=!0),Nl(e,t&&!n),Ao(e,0),Ue(e,_n);var r=e.nodes&&e.nodes.t;if(r!==null)for(const s of r)s.stop();wl(e);var l=e.parent;l!==null&&l.first!==null&&Ol(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Ks(e,t){for(;e!==null;){var n=e===t?null:Eo(e);e.remove(),e=n}}function Ol(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Bn(e,t,n=!0){var r=[];kl(e,r,!0);var l=()=>{n&&st(e),t&&t()},s=r.length;if(s>0){var a=()=>--s||l();for(var c of r)c.out(a)}else l()}function kl(e,t,n){if((e.f&ft)===0){e.f^=ft;var r=e.nodes&&e.nodes.t;if(r!==null)for(const c of r)(c.is_global||n)&&t.push(c);for(var l=e.first;l!==null;){var s=l.next,a=(l.f&$n)!==0||(l.f&Ut)!==0&&(e.f&nn)!==0;kl(l,t,a?n:!1),l=s}}}function wr(e){Cl(e,!0)}function Cl(e,t){if((e.f&ft)!==0){e.f^=ft,(e.f&Me)===0&&(Ue(e,qe),Lt(e));for(var n=e.first;n!==null;){var r=n.next,l=(n.f&$n)!==0||(n.f&Ut)!==0;Cl(n,l?t:!1),n=r}var s=e.nodes&&e.nodes.t;if(s!==null)for(const a of s)(a.is_global||t)&&a.in()}}function Rl(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var l=n===r?null:Eo(n);t.append(n),n=l}}let Do=!1,Sn=!1;function Ar(e){Sn=e}let ie=null,Dt=!1;function wt(e){ie=e}let be=null;function Vt(e){be=e}let xt=null;function Bl(e){ie!==null&&(xt===null?xt=[e]:xt.push(e))}let lt=null,at=0,ht=null;function Zs(e){ht=e}let Ll=1,xn=0,Ln=xn;function Ur(e){Ln=e}function Dl(){return++Ll}function wo(e){var t=e.f;if((t&qe)!==0)return!0;if(t&je&&(e.f&=~An),(t&At)!==0){for(var n=e.deps,r=n.length,l=0;l<r;l++){var s=n[l];if(wo(s)&&vl(s),s.wv>e.wv)return!0}(t&Et)!==0&&We===null&&Ue(e,Me)}return!1}function $l(e,t,n=!0){var r=e.reactions;if(r!==null&&!(xt!==null&&Qn.call(xt,e)))for(var l=0;l<r.length;l++){var s=r[l];(s.f&je)!==0?$l(s,t,!1):t===s&&(n?Ue(s,qe):(s.f&Me)!==0&&Ue(s,At),Lt(s))}}function Al(e){var T;var t=lt,n=at,r=ht,l=ie,s=xt,a=dt,c=Dt,i=Ln,u=e.f;lt=null,at=0,ht=null,ie=(u&(Ut|Xn))===0?e:null,xt=null,eo(e.ctx),Dt=!1,Ln=++xn,e.ac!==null&&(Yo(()=>{e.ac.abort(Yn)}),e.ac=null);try{e.f|=er;var d=e.fn,p=d(),_=e.deps,y=le==null?void 0:le.is_fork;if(lt!==null){var f;if(y||Ao(e,at),_!==null&&at>0)for(_.length=at+lt.length,f=0;f<lt.length;f++)_[at+f]=lt[f];else e.deps=_=lt;if(Er()&&(e.f&Et)!==0)for(f=at;f<_.length;f++)((T=_[f]).reactions??(T.reactions=[])).push(e)}else!y&&_!==null&&at<_.length&&(Ao(e,at),_.length=at);if(ol()&&ht!==null&&!Dt&&_!==null&&(e.f&(je|At|qe))===0)for(f=0;f<ht.length;f++)$l(ht[f],e);if(l!==null&&l!==e){if(xn++,l.deps!==null)for(let v=0;v<n;v+=1)l.deps[v].rv=xn;if(t!==null)for(const v of t)v.rv=xn;ht!==null&&(r===null?r=ht:r.push(...ht))}return(e.f&vn)!==0&&(e.f^=vn),p}catch(v){return ll(v)}finally{e.f^=er,lt=t,at=n,ht=r,ie=l,xt=s,eo(a),Dt=c,Ln=i}}function Js(e,t){let n=t.reactions;if(n!==null){var r=ss.call(n,e);if(r!==-1){var l=n.length-1;l===0?n=t.reactions=null:(n[r]=n[l],n.pop())}}if(n===null&&(t.f&je)!==0&&(lt===null||!Qn.call(lt,t))){var s=t;(s.f&Et)!==0&&(s.f^=Et,s.f&=~An),Tr(s),_l(s),Ao(s,0)}}function Ao(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Js(e,n[r])}function ho(e){var t=e.f;if((t&_n)===0){Ue(e,Me);var n=be,r=Do;be=e,Do=!0;try{(t&(nn|Jr))!==0?qs(e):Nl(e),wl(e);var l=Al(e);e.teardown=typeof l=="function"?l:null,e.wv=Ll;var s;Qo&&ws&&(e.f&qe)!==0&&e.deps}finally{Do=r,be=n}}}async function Qs(){await Promise.resolve(),ks()}function o(e){var t=e.f,n=(t&je)!==0;if(ie!==null&&!Dt){var r=be!==null&&(be.f&_n)!==0;if(!r&&(xt===null||!Qn.call(xt,e))){var l=ie.deps;if((ie.f&er)!==0)e.rv<xn&&(e.rv=xn,lt===null&&l!==null&&l[at]===e?at++:lt===null?lt=[e]:lt.push(e));else{(ie.deps??(ie.deps=[])).push(e);var s=e.reactions;s===null?e.reactions=[ie]:Qn.call(s,ie)||s.push(ie)}}}if(Sn&&hn.has(e))return hn.get(e);if(n){var a=e;if(Sn){var c=a.v;return((a.f&Me)===0&&a.reactions!==null||Sl(a))&&(c=yr(a)),hn.set(a,c),c}var i=(a.f&Et)===0&&!Dt&&ie!==null&&(Do||(ie.f&Et)!==0),u=a.deps===null;wo(a)&&(i&&(a.f|=Et),vl(a)),i&&!u&&Ul(a)}if(We!=null&&We.has(e))return We.get(e);if((e.f&vn)!==0)throw e.v;return e.v}function Ul(e){if(e.deps!==null){e.f|=Et;for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),(t.f&je)!==0&&(t.f&Et)===0&&Ul(t)}}function Sl(e){if(e.v===ze)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(hn.has(t)||(t.f&je)!==0&&Sl(t))return!0;return!1}function lo(e){var t=Dt;try{return Dt=!0,e()}finally{Dt=t}}const Il=new Set,cr=new Set;function ei(e,t,n,r={}){function l(s){if(r.capture||io.call(t,s),!s.cancelBubble)return Yo(()=>n==null?void 0:n.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?tn(()=>{t.addEventListener(e,l,r)}):t.addEventListener(e,l,r),l}function zo(e,t,n,r,l){var s={capture:r,passive:l},a=ei(e,t,n,s);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&xr(()=>{t.removeEventListener(e,a,s)})}function Se(e){for(var t=0;t<e.length;t++)Il.add(e[t]);for(var n of cr)n(e)}let Sr=null;function io(e){var v;var t=this,n=t.ownerDocument,r=e.type,l=((v=e.composedPath)==null?void 0:v.call(e))||[],s=l[0]||e.target;Sr=e;var a=0,c=Sr===e&&e.__root;if(c){var i=l.indexOf(c);if(i!==-1&&(t===document||t===window)){e.__root=t;return}var u=l.indexOf(t);if(u===-1)return;i<=u&&(a=i)}if(s=l[a]||e.target,s!==t){jr(e,"currentTarget",{configurable:!0,get(){return s||n}});var d=ie,p=be;wt(null),Vt(null);try{for(var _,y=[];s!==null;){var f=s.assignedSlot||s.parentNode||s.host||null;try{var T=s["__"+r];T!=null&&(!s.disabled||e.target===s)&&T.call(s,e)}catch(b){_?y.push(b):_=b}if(e.cancelBubble||f===t||f===null)break;s=f}if(_){for(let b of y)queueMicrotask(()=>{throw b});throw _}}finally{e.__root=t,delete e.currentTarget,wt(d),Vt(p)}}}function Gl(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function bo(e,t){var n=be;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function Z(e,t){var n=(t&zr)!==0,r=(t&rs)!==0,l,s=!e.startsWith("<!>");return()=>{l===void 0&&(l=Gl(s?e:"<!>"+e),n||(l=Qt(l)));var a=r||gl?document.importNode(l,!0):l.cloneNode(!0);if(n){var c=Qt(a),i=a.lastChild;bo(c,i)}else bo(a,a);return a}}function ti(e,t,n="svg"){var r=!e.startsWith("<!>"),l=(t&zr)!==0,s=`<${n}>${r?e:"<!>"+e}</${n}>`,a;return()=>{if(!a){var c=Gl(s),i=Qt(c);if(l)for(a=document.createDocumentFragment();Qt(i);)a.appendChild(Qt(i));else a=Qt(i)}var u=a.cloneNode(!0);if(l){var d=Qt(u),p=u.lastChild;bo(d,p)}else bo(u,u);return u}}function rn(e,t){return ti(e,t,"svg")}function mt(){var e=document.createDocumentFragment(),t=document.createComment(""),n=bn();return e.append(t,n),bo(t,n),e}function U(e,t){e!==null&&e.before(t)}const ni=["touchstart","touchmove"];function oi(e){return ni.includes(e)}function me(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function ri(e,t){return li(e,t)}const Pn=new Map;function li(e,{target:t,anchor:n,props:r={},events:l,context:s,intro:a=!0}){Ps();var c=new Set,i=p=>{for(var _=0;_<p.length;_++){var y=p[_];if(!c.has(y)){c.add(y);var f=oi(y);t.addEventListener(y,io,{passive:f});var T=Pn.get(y);T===void 0?(document.addEventListener(y,io,{passive:f}),Pn.set(y,1)):Pn.set(y,T+1)}}};i(Fo(Il)),cr.add(i);var u=void 0,d=zs(()=>{var p=n??t.appendChild(bn());return Ls(p,{pending:()=>{}},_=>{ye({});var y=dt;s&&(y.c=s),l&&(r.$$events=l),u=e(_,r)||{},Ee()}),()=>{var f;for(var _ of c){t.removeEventListener(_,io);var y=Pn.get(_);--y===0?(document.removeEventListener(_,io),Pn.delete(_)):Pn.set(_,y)}cr.delete(i),p!==n&&((f=p.parentNode)==null||f.removeChild(p))}});return si.set(u,d),u}let si=new WeakMap;var Bt,Mt,ct,Rn,mo,yo,Xo;class Xl{constructor(t,n=!0){Gt(this,"anchor");re(this,Bt,new Map);re(this,Mt,new Map);re(this,ct,new Map);re(this,Rn,new Set);re(this,mo,!0);re(this,yo,()=>{var t=le;if(m(this,Bt).has(t)){var n=m(this,Bt).get(t),r=m(this,Mt).get(n);if(r)wr(r),m(this,Rn).delete(n);else{var l=m(this,ct).get(n);l&&(m(this,Mt).set(n,l.effect),m(this,ct).delete(n),l.fragment.lastChild.remove(),this.anchor.before(l.fragment),r=l.effect)}for(const[s,a]of m(this,Bt)){if(m(this,Bt).delete(s),s===t)break;const c=m(this,ct).get(a);c&&(st(c.effect),m(this,ct).delete(a))}for(const[s,a]of m(this,Mt)){if(s===n||m(this,Rn).has(s))continue;const c=()=>{if(Array.from(m(this,Bt).values()).includes(s)){var u=document.createDocumentFragment();Rl(a,u),u.append(bn()),m(this,ct).set(s,{effect:a,fragment:u})}else st(a);m(this,Rn).delete(s),m(this,Mt).delete(s)};m(this,mo)||!r?(m(this,Rn).add(s),Bn(a,c,!1)):c()}}});re(this,Xo,t=>{m(this,Bt).delete(t);const n=Array.from(m(this,Bt).values());for(const[r,l]of m(this,ct))n.includes(r)||(st(l.effect),m(this,ct).delete(r))});this.anchor=t,oe(this,mo,n)}ensure(t,n){var r=le,l=yl();if(n&&!m(this,Mt).has(t)&&!m(this,ct).has(t))if(l){var s=document.createDocumentFragment(),a=bn();s.append(a),m(this,ct).set(t,{effect:Tt(()=>n(a)),fragment:s})}else m(this,Mt).set(t,Tt(()=>n(this.anchor)));if(m(this,Bt).set(r,t),l){for(const[c,i]of m(this,Mt))c===t?r.unskip_effect(i):r.skip_effect(i);for(const[c,i]of m(this,ct))c===t?r.unskip_effect(i.effect):r.skip_effect(i.effect);r.oncommit(m(this,yo)),r.ondiscard(m(this,Xo))}else m(this,yo).call(this)}}Bt=new WeakMap,Mt=new WeakMap,ct=new WeakMap,Rn=new WeakMap,mo=new WeakMap,yo=new WeakMap,Xo=new WeakMap;function ii(e,t,...n){var r=new Xl(e);Vo(()=>{const l=t()??null;r.ensure(l,l&&(s=>l(s,...n)))},$n)}function Nr(e){dt===null&&ds(),xo(()=>{const t=lo(e);if(typeof t=="function")return t})}function se(e,t,n=!1){var r=new Xl(e),l=n?$n:0;function s(a,c){r.ensure(a,c)}Vo(()=>{var a=!1;t((c,i=!0)=>{a=!0,s(i,c)}),a||s(!1,null)},l)}function $e(e,t){return t}function ai(e,t,n){for(var r=[],l=t.length,s,a=t.length,c=0;c<l;c++){let p=t[c];Bn(p,()=>{if(s){if(s.pending.delete(p),s.done.add(p),s.pending.size===0){var _=e.outrogroups;ur(Fo(s.done)),_.delete(s),_.size===0&&(e.outrogroups=null)}}else a-=1},!1)}if(a===0){var i=r.length===0&&n!==null;if(i){var u=n,d=u.parentNode;Ms(d),d.append(u),e.items.clear()}ur(t,!i)}else s={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(s)}function ur(e,t=!0){for(var n=0;n<e.length;n++)st(e[n],t)}var Ir;function Ae(e,t,n,r,l,s=null){var a=e,c=new Map,i=(t&Vr)!==0;if(i){var u=e;a=u.appendChild(bn())}var d=null,p=Gs(()=>{var b=n();return Wr(b)?b:b==null?[]:Fo(b)}),_,y=!0;function f(){v.fallback=d,ci(v,_,a,t,r),d!==null&&(_.length===0?(d.f&en)===0?wr(d):(d.f^=en,ao(d,null,a)):Bn(d,()=>{d=null}))}var T=Vo(()=>{_=o(p);for(var b=_.length,x=new Set,w=le,N=yl(),O=0;O<b;O+=1){var $=_[O],R=r($,O),B=y?null:c.get(R);B?(B.v&&no(B.v,$),B.i&&no(B.i,O),N&&w.unskip_effect(B.e)):(B=ui(c,y?a:Ir??(Ir=bn()),$,R,O,l,t,n),y||(B.e.f|=en),c.set(R,B)),x.add(R)}if(b===0&&s&&!d&&(y?d=Tt(()=>s(a)):(d=Tt(()=>s(Ir??(Ir=bn()))),d.f|=en)),b>x.size&&vs(),!y)if(N){for(const[H,S]of c)x.has(H)||w.skip_effect(S.e);w.oncommit(f),w.ondiscard(()=>{})}else f();o(p)}),v={effect:T,items:c,outrogroups:null,fallback:d};y=!1}function so(e){for(;e!==null&&(e.f&Ut)===0;)e=e.next;return e}function ci(e,t,n,r,l){var S,z,q,P,K,D,I,G,M;var s=(r&ns)!==0,a=t.length,c=e.items,i=so(e.effect.first),u,d=null,p,_=[],y=[],f,T,v,b;if(s)for(b=0;b<a;b+=1)f=t[b],T=l(f,b),v=c.get(T).e,(v.f&en)===0&&((z=(S=v.nodes)==null?void 0:S.a)==null||z.measure(),(p??(p=new Set)).add(v));for(b=0;b<a;b+=1){if(f=t[b],T=l(f,b),v=c.get(T).e,e.outrogroups!==null)for(const X of e.outrogroups)X.pending.delete(v),X.done.delete(v);if((v.f&en)!==0)if(v.f^=en,v===i)ao(v,null,n);else{var x=d?d.next:i;v===e.effect.last&&(e.effect.last=v.prev),v.prev&&(v.prev.next=v.next),v.next&&(v.next.prev=v.prev),an(e,d,v),an(e,v,x),ao(v,x,n),d=v,_=[],y=[],i=so(d.next);continue}if((v.f&ft)!==0&&(wr(v),s&&((P=(q=v.nodes)==null?void 0:q.a)==null||P.unfix(),(p??(p=new Set)).delete(v))),v!==i){if(u!==void 0&&u.has(v)){if(_.length<y.length){var w=y[0],N;d=w.prev;var O=_[0],$=_[_.length-1];for(N=0;N<_.length;N+=1)ao(_[N],w,n);for(N=0;N<y.length;N+=1)u.delete(y[N]);an(e,O.prev,$.next),an(e,d,O),an(e,$,w),i=w,d=$,b-=1,_=[],y=[]}else u.delete(v),ao(v,i,n),an(e,v.prev,v.next),an(e,v,d===null?e.effect.first:d.next),an(e,d,v),d=v;continue}for(_=[],y=[];i!==null&&i!==v;)(u??(u=new Set)).add(i),y.push(i),i=so(i.next);if(i===null)continue}(v.f&en)===0&&_.push(v),d=v,i=so(v.next)}if(e.outrogroups!==null){for(const X of e.outrogroups)X.pending.size===0&&(ur(Fo(X.done)),(K=e.outrogroups)==null||K.delete(X));e.outrogroups.size===0&&(e.outrogroups=null)}if(i!==null||u!==void 0){var R=[];if(u!==void 0)for(v of u)(v.f&ft)===0&&R.push(v);for(;i!==null;)(i.f&ft)===0&&i!==e.fallback&&R.push(i),i=so(i.next);var B=R.length;if(B>0){var H=(r&Vr)!==0&&a===0?n:null;if(s){for(b=0;b<B;b+=1)(I=(D=R[b].nodes)==null?void 0:D.a)==null||I.measure();for(b=0;b<B;b+=1)(M=(G=R[b].nodes)==null?void 0:G.a)==null||M.fix()}ai(e,R,H)}}s&&tn(()=>{var X,ee;if(p!==void 0)for(v of p)(ee=(X=v.nodes)==null?void 0:X.a)==null||ee.apply()})}function ui(e,t,n,r,l,s,a,c){var i=(a&es)!==0?(a&os)===0?hl(n,!1,!1):Un(n):null,u=(a&ts)!==0?Un(l):null;return{v:i,i:u,e:Tt(()=>(s(t,i??n,u??l,c),()=>{e.delete(r)}))}}function ao(e,t,n){if(e.nodes)for(var r=e.nodes.start,l=e.nodes.end,s=t&&(t.f&en)===0?t.nodes.start:n;r!==null;){var a=Eo(r);if(s.before(r),r===l)return;r=a}}function an(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function Fl(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(n=Fl(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function fi(){for(var e,t,n=0,r="",l=arguments.length;n<l;n++)(e=arguments[n])&&(t=Fl(e))&&(r&&(r+=" "),r+=t);return r}function de(e){return typeof e=="object"?fi(e):e??""}function di(e,t,n){var r=e==null?"":""+e;return r===""?null:r}function Gr(e,t=!1){var n=t?" !important;":";",r="";for(var l in e){var s=e[l];s!=null&&s!==""&&(r+=" "+l+": "+s+n)}return r}function _i(e,t){if(t){var n="",r,l;return Array.isArray(t)?(r=t[0],l=t[1]):r=t,r&&(n+=Gr(r)),l&&(n+=Gr(l,!0)),n=n.trim(),n===""?null:n}return String(e)}function Q(e,t,n,r,l,s){var a=e.__className;if(a!==n||a===void 0){var c=di(n);c==null?e.removeAttribute("class"):e.className=c,e.__className=n}return s}function qo(e,t={},n,r){for(var l in n){var s=n[l];t[l]!==s&&(n[l]==null?e.style.removeProperty(l):e.style.setProperty(l,s,r))}}function h(e,t,n,r){var l=e.__style;if(l!==t){var s=_i(t,r);s==null?e.removeAttribute("style"):e.style.cssText=s,e.__style=t}else r&&(Array.isArray(r)?(qo(e,n==null?void 0:n[0],r[0]),qo(e,n==null?void 0:n[1],r[1],"important")):qo(e,n,r));return r}const vi=Symbol("is custom element"),pi=Symbol("is html");function yt(e,t){var n=Or(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function co(e,t){var n=Or(e);n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function W(e,t,n,r){var l=Or(e);l[t]!==(l[t]=n)&&(t==="loading"&&(e[fs]=n),n==null?e.removeAttribute(t):typeof n!="string"&&hi(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Or(e){return e.__attributes??(e.__attributes={[vi]:e.nodeName.includes("-"),[pi]:e.namespaceURI===ls})}var Xr=new Map;function hi(e){var t=e.getAttribute("is")||e.nodeName,n=Xr.get(t);if(n)return n;Xr.set(t,n=[]);for(var r,l=e,s=Element.prototype;s!==l;){r=is(l);for(var a in r)r[a].set&&n.push(a);l=qr(l)}return n}function Yt(e,t,n=t){var r=new WeakSet;El(e,"input",async l=>{var s=l?e.defaultValue:e.value;if(s=Ko(e)?Zo(s):s,n(s),le!==null&&r.add(le),await Qs(),s!==(s=t())){var a=e.selectionStart,c=e.selectionEnd,i=e.value.length;if(e.value=s??"",c!==null){var u=e.value.length;a===c&&c===i&&u>i?(e.selectionStart=u,e.selectionEnd=u):(e.selectionStart=a,e.selectionEnd=Math.min(c,u))}}}),lo(t)==null&&e.value&&(n(Ko(e)?Zo(e.value):e.value),le!==null&&r.add(le)),Ho(()=>{var l=t();if(e===document.activeElement){var s=tr??le;if(r.has(s))return}Ko(e)&&l===Zo(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function bi(e,t,n=t){El(e,"change",r=>{var l=r?e.defaultChecked:e.checked;n(l)}),lo(t)==null&&n(e.checked),Ho(()=>{var r=t();e.checked=!!r})}function Ko(e){var t=e.type;return t==="number"||t==="range"}function Zo(e){return e===""?null:+e}function Fr(e,t){return e===t||(e==null?void 0:e[Ro])===t}function No(e={},t,n,r){return Ws(()=>{var l,s;return Ho(()=>{l=s,s=[],lo(()=>{e!==n(...s)&&(t(e,...s),l&&Fr(n(...l),e)&&t(null,...l))})}),()=>{tn(()=>{s&&Fr(n(...s),e)&&t(null,...s)})}}),e}function kr(e,t,n){if(e==null)return t(void 0),n&&n(void 0),dn;const r=lo(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const Mn=[];function gi(e,t){return{subscribe:we(e,t).subscribe}}function we(e,t=dn){let n=null;const r=new Set;function l(c){if(tl(e,c)&&(e=c,n)){const i=!Mn.length;for(const u of r)u[1](),Mn.push(u,e);if(i){for(let u=0;u<Mn.length;u+=2)Mn[u][0](Mn[u+1]);Mn.length=0}}}function s(c){l(c(e))}function a(c,i=dn){const u=[c,i];return r.add(u),r.size===1&&(n=t(l,s)||dn),c(e),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:l,update:s,subscribe:a}}function Pl(e,t,n){const r=!Array.isArray(e),l=r?[e]:e;if(!l.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=t.length<2;return gi(n,(a,c)=>{let i=!1;const u=[];let d=0,p=dn;const _=()=>{if(d)return;p();const f=t(r?u[0]:u,a,c);s?a(f):p=typeof f=="function"?f:dn},y=l.map((f,T)=>kr(f,v=>{u[T]=v,d&=~(1<<T),i&&_()},()=>{d|=1<<T}));return i=!0,_(),function(){Kr(y),p(),i=!1}})}function ot(e){let t;return kr(e,n=>t=n)(),t}let fr=Symbol();function L(e,t,n){const r=n[t]??(n[t]={store:null,source:hl(void 0),unsubscribe:dn});if(r.store!==e&&!(fr in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=dn;else{var l=!0;r.unsubscribe=kr(e,s=>{l?r.source.v=s:F(r.source,s)}),l=!1}return e&&fr in n?ot(e):o(r.source)}function De(){const e={};function t(){xr(()=>{for(var n in e)e[n].unsubscribe();jr(e,fr,{enumerable:!1,value:!0})})}return[e,t]}function Ti(e,t,n,r){var l=r,s=!0,a=()=>(s&&(s=!1,l=r),l),c;c=e[t],c===void 0&&r!==void 0&&(c=a());var i;return i=()=>{var u=e[t];return u===void 0?a():(s=!0,u)},i}const oo=we("Operator"),In=we(null),mi=we(null),gn=we(1),Hn=we(0),Vn=we(0),ke=we("ironclad"),Ml=Pl(ke,e=>e!=="light"),vo=we(!1),Jo=we(null),Uo=we(!1),Te=we(null),So=we({visible:!1,x:0,y:0,nodeIndex:null,connectionIndex:null}),Tn=we(!1),yi=Pl(gn,e=>Math.round(e*100)),Pr={NODE_DEFAULT:"#b0c4de",NODE_GREYED_OUT:"#dcdcdc",NODE_HIGHLIGHT:"#ffd700",NODE_HOST:"#40e0d0",NODE_OUTLINE_DEFAULT:"#000000",NODE_PING_SUCCESS:"#008000",NODE_PING_PARTIAL_SUCCESS:"#ffff00",NODE_PING_FAILURE:"#ff0000",FRAME_BG:"#ffffff",INFO_NOTE_BG:"#ffffff",INFO_TEXT:"#000000",BUTTON_BG:"#ffffff",BUTTON_TEXT:"#000000",BUTTON_ACTIVE_BG:"#e0e0e0",BUTTON_ACTIVE_TEXT:"#000000",BUTTON_CONFIGURATION_MODE:"#f08080",Connections:"#696969",BORDER_COLOR:"#f7f7f7",GROUP_DEFAULT:"#e6f2ff",GROUP_OUTLINE:"#4d94ff",GROUP_SELECTED:"#0066cc",GROUP_TEXT:"#003366",ROW_BG_EVEN:"#f9f9f9",ROW_BG_ODD:"#e6f0fa",HEADER_BG:"#dbeafe",HEADER_TEXT:"#1e293b",ENTRY_FOCUS_BG:"#f9f9f9",CELL_BORDER:"#b6b6b6",ENTRY_TEXT:"#222222"},Mr={NODE_DEFAULT:"#28376c",NODE_GREYED_OUT:"#4B5563",NODE_HIGHLIGHT:"#D97706",NODE_HOST:"#72741f",NODE_OUTLINE_DEFAULT:"#374151",NODE_PING_SUCCESS:"#047857",NODE_PING_PARTIAL_SUCCESS:"#B45309",NODE_PING_FAILURE:"#991B1B",FRAME_BG:"#0c0f14",INFO_NOTE_BG:"#111827",INFO_TEXT:"#8f8f8f",BUTTON_BG:"#1e2540",BUTTON_TEXT:"#c7c7c7",BUTTON_ACTIVE_BG:"#111827",BUTTON_ACTIVE_TEXT:"#000000",BUTTON_CONFIGURATION_MODE:"#F87171",Connections:"#6a7586",BORDER_COLOR:"#374151",GROUP_DEFAULT:"#1a2942",GROUP_OUTLINE:"#3a5894",GROUP_SELECTED:"#5d8cd9",GROUP_TEXT:"#a3c2ff",ROW_BG_EVEN:"#181e29",ROW_BG_ODD:"#232b3a",HEADER_BG:"#22304a",HEADER_TEXT:"#e0e7ef",ENTRY_FOCUS_BG:"#2d3748",CELL_BORDER:"#3b4252",ENTRY_TEXT:"#e0e7ef"},Ei={NODE_DEFAULT:"#1b3a5c",NODE_GREYED_OUT:"#3e4147",NODE_HIGHLIGHT:"#c77a3c",NODE_HOST:"#4a7c59",NODE_OUTLINE_DEFAULT:"#4a4d52",NODE_PING_SUCCESS:"#2d7d46",NODE_PING_PARTIAL_SUCCESS:"#c77a3c",NODE_PING_FAILURE:"#8b2e2e",FRAME_BG:"#2b2d31",INFO_NOTE_BG:"#232529",INFO_TEXT:"#a8adb5",BUTTON_BG:"#383b41",BUTTON_TEXT:"#d4d7dc",BUTTON_ACTIVE_BG:"#1b3a5c",BUTTON_ACTIVE_TEXT:"#e8eaed",BUTTON_CONFIGURATION_MODE:"#c77a3c",Connections:"#5a6068",BORDER_COLOR:"#4a4d52",GROUP_DEFAULT:"#1e2a38",GROUP_OUTLINE:"#3a5c7c",GROUP_SELECTED:"#c77a3c",GROUP_TEXT:"#8fa8c8",ROW_BG_EVEN:"#2b2d31",ROW_BG_ODD:"#313438",HEADER_BG:"#1b3a5c",HEADER_TEXT:"#d4d7dc",ENTRY_FOCUS_BG:"#383b41",CELL_BORDER:"#4a4d52",ENTRY_TEXT:"#d4d7dc"};function Ie(e){if(typeof e=="string")switch(e){case"ironclad":return Ei;case"dark":return Mr;default:return Pr}return e?Mr:Pr}const Wo=[{id:"preset1",name:"Classic Blue",light_bg:"#e3f0ff",light_border:"#3a7bd5",dark_bg:"#22304a",dark_border:"#3a7bd5"},{id:"preset2",name:"Sunset",light_bg:"#ffe5d0",light_border:"#ff7f50",dark_bg:"#4a2c23",dark_border:"#ff7f50"},{id:"preset3",name:"Mint",light_bg:"#e0fff4",light_border:"#2ecc71",dark_bg:"#204034",dark_border:"#2ecc71"},{id:"preset4",name:"Lavender",light_bg:"#f3e8ff",light_border:"#a259e6",dark_bg:"#2d234a",dark_border:"#a259e6"},{id:"preset5",name:"Slate",light_bg:"#f0f4f8",light_border:"#607d8b",dark_bg:"#232b32",dark_border:"#607d8b"},{id:"preset6",name:"Contrast",light_bg:"#ffffff",light_border:"#000000",dark_bg:"#000000",dark_border:"#ffffff"}];function xi(e,t,n=Wo){const r=n.find(l=>l.id===e)??n[0];return t?{bg:r.dark_bg,border:r.dark_border}:{bg:r.light_bg,border:r.light_border}}const He=we([]),_t=we([]),Gn=we([]),yn=we([]),Ht=we({VLAN_1:"VLAN_1",VLAN_2:"VLAN_2",VLAN_3:"VLAN_3",VLAN_4:"VLAN_4"}),$t=we(["VLAN_1","VLAN_2","VLAN_3","VLAN_4"]),Dn=we({node_size:14,show_connections:!0,show_connection_labels:!0,show_notes:!0,show_groups:!0}),fn=we({}),Oo=we([...Wo]),mn=we({}),Io=we(null);function Ot(){Tn.set(!0)}function Yl(e){He.update(t=>[...t,e]),Ot()}function qt(e,t){He.update(n=>{const r=[...n];return r[e]&&(r[e]={...r[e],...t}),r}),Ot()}function Hl(e){_t.update(t=>t.filter(n=>n.from!==e&&n.to!==e).map(n=>({...n,from:n.from>e?n.from-1:n.from,to:n.to>e?n.to-1:n.to}))),He.update(t=>t.filter((n,r)=>r!==e)),Ot()}function wi(e,t,n){He.update(r=>{const l=[...r];return l[e]&&(l[e]={...l[e],x:t,y:n}),l}),Ot()}function Ni(e){_t.update(t=>[...t,e]),Ot()}function dr(e,t){_t.update(n=>{const r=[...n];return r[e]&&(r[e]={...r[e],...t}),r}),Ot()}function _r(e){_t.update(t=>t.filter((n,r)=>r!==e)),Ot()}function Oi(e){Gn.update(t=>[...t,e]),Ot()}function ki(e){Gn.update(t=>t.filter((n,r)=>r!==e)),Ot()}function Ci(e){yn.update(t=>[...t,e]),Ot()}function Yr(e,t){yn.update(n=>{const r=[...n];return r[e]&&(r[e]={...r[e],...t}),r}),Ot()}function Ri(e){yn.update(t=>t.filter((n,r)=>r!==e)),Ot()}function Vl(){He.set([]),_t.set([]),Gn.set([]),yn.set([]),mn.set({}),fn.set({}),Ht.set({VLAN_1:"VLAN_1",VLAN_2:"VLAN_2",VLAN_3:"VLAN_3",VLAN_4:"VLAN_4"}),$t.set(["VLAN_1","VLAN_2","VLAN_3","VLAN_4"]),Oo.set([...Wo]),Dn.set({node_size:14,show_connections:!0,show_connection_labels:!0,show_notes:!0,show_groups:!0}),Tn.set(!1)}function Bi(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1])}function Li(e,t,n,r,l,s){const a=l-n,c=s-r;if(a===0&&c===0)return Math.hypot(e-n,t-r);const i=Math.max(0,Math.min(1,((e-n)*a+(t-r)*c)/(a*a+c*c))),u=n+i*a,d=r+i*c;return Math.hypot(e-u,t-d)}function Di(e,t){if(e.length===0)return[0,0];if(e.length===1)return e[0];const n=[];let r=0;for(let a=0;a<e.length-1;a++){const c=Bi(e[a],e[a+1]);n.push(c),r+=c}if(r===0)return e[0];const l=t*r;let s=0;for(let a=0;a<n.length;a++){if(s+n[a]>=l){const c=n[a]>0?(l-s)/n[a]:0,[i,u]=e[a],[d,p]=e[a+1];return[i+(d-i)*c,u+(p-u)*c]}s+=n[a]}return e[e.length-1]}function $i(e,t,n){let r=null,l=0;for(let s=0;s<n.length-1;s++){const a=Li(e,t,n[s][0],n[s][1],n[s+1][0],n[s+1][1]);(r===null||a<r)&&(r=a,l=s)}return l}function zl(e,t,n,r,l){const s=[[e,t]];if(l)for(const a of l)s.push(a);return s.push([n,r]),s}async function Nt(e,t={},n){return window.__TAURI_INTERNALS__.invoke(e,t,n)}async function Wl(e){const n=ot(He)[e];if(!n)return;const l=ot($t).filter(a=>{const c=n.vlans[a];return c&&c.trim()!==""});if(l.length===0)return;const s=l.map(a=>n.vlans[a]);try{const a=await Nt("ping_ips",{ips:s});mn.update(c=>({...c,[e]:a}))}catch(a){console.error("Ping failed for node",n.name,a),mn.update(c=>({...c,[e]:l.map(()=>!1)}))}}async function Ai(){const t=ot(He).map((n,r)=>Wl(r));await Promise.allSettled(t)}function Ui(){mn.set({})}var Si=rn('<g data-type="node"><rect rx="2"></rect><text text-anchor="middle" dominant-baseline="central" font-family="Helvetica, Arial, sans-serif" pointer-events="none"> </text></g>');function Ii(e,t){ye(t,!0);let n,r=te(30),l=te(16);xo(()=>{n&&(t.node.name,t.fontSize,requestAnimationFrame(()=>{if(n)try{const _=n.getBBox();F(r,_.width,!0),F(l,_.height,!0)}catch{}}))});let s=Y(()=>Math.max(2,Math.round(t.fontSize*.3))),a=Y(()=>o(r)/2+o(s)),c=Y(()=>o(l)/2+o(s));var i=Si();i.__mousedown=function(..._){var y;(y=t.onMouseDown)==null||y.apply(this,_)},h(i,"",{},{cursor:"pointer"});var u=E(i),d=g(u),p=E(d);No(d,_=>n=_,()=>n),j(()=>{W(i,"data-index",t.index),W(u,"x",t.node.x-o(a)),W(u,"y",t.node.y-o(c)),W(u,"width",o(a)*2),W(u,"height",o(c)*2),W(u,"fill",t.fillColor),W(u,"stroke",t.outlineColor),W(u,"stroke-width",t.outlineWidth),W(d,"x",t.node.x),W(d,"y",t.node.y),W(d,"fill",t.textColor),W(d,"font-size",t.fontSize),me(p,t.node.name)}),U(e,i),Ee()}Se(["mousedown"]);var Gi=rn('<rect rx="2" pointer-events="none"></rect><text text-anchor="middle" dominant-baseline="central" font-family="Helvetica, Arial, sans-serif" font-size="12"> </text>',1),Xi=rn('<g data-type="connection"><polyline fill="none" stroke="transparent" stroke-width="10"></polyline><polyline fill="none" stroke-width="2" pointer-events="none"></polyline><!></g>');function Fi(e,t){ye(t,!0);let n=Y(()=>zl(t.fromNode.x,t.fromNode.y,t.toNode.x,t.toNode.y,t.connection.waypoints)),r=Y(()=>o(n).map(([f,T])=>`${f},${T}`).join(" ")),l=Y(()=>t.connection.label_pos??.5),s=Y(()=>Di(o(n),o(l))),a,c=te(0),i=te(0);xo(()=>{a&&t.connection.label&&requestAnimationFrame(()=>{if(a)try{const f=a.getBBox();F(c,f.width,!0),F(i,f.height,!0)}catch{}})});var u=Xi(),d=E(u);d.__mousedown=function(...f){var T;(T=t.onMiddleClick)==null||T.apply(this,f)},d.__contextmenu=f=>{f.preventDefault(),t.onRightClick(f)},h(d,"",{},{cursor:"pointer"});var p=g(d),_=g(p);{var y=f=>{var T=Gi(),v=Le(T),b=g(v);b.__contextmenu=w=>{w.preventDefault(),t.onRightClick(w)},h(b,"",{},{cursor:"pointer"});var x=E(b);No(b,w=>a=w,()=>a),j(()=>{W(v,"x",o(s)[0]-o(c)/2-2),W(v,"y",o(s)[1]-o(i)/2-2),W(v,"width",o(c)+4),W(v,"height",o(i)+4),W(v,"fill",t.labelBgColor),W(b,"x",o(s)[0]),W(b,"y",o(s)[1]),W(b,"fill",t.textColor),me(x,t.connection.label)}),U(f,T)};se(_,f=>{t.showLabels&&t.connection.label&&t.connection.label.trim()&&f(y)})}j(()=>{W(u,"data-index",t.index),W(d,"points",o(r)),W(p,"points",o(r)),W(p,"stroke",t.lineColor)}),U(e,u),Ee()}Se(["mousedown","contextmenu"]);var Pi=rn('<g data-type="sticky"><rect rx="3" class="sticky_bg"></rect><text dominant-baseline="central" font-family="Helvetica, Arial, sans-serif" font-size="12" pointer-events="none" class="sticky_note"> </text></g>');function Mi(e,t){ye(t,!0);let n,r=te(30),l=te(14);xo(()=>{n&&(t.note.text,requestAnimationFrame(()=>{if(n)try{const u=n.getBBox();F(r,u.width,!0),F(l,u.height,!0)}catch{}}))});var s=Pi();s.__mousedown=function(...u){var d;(d=t.onMouseDown)==null||d.apply(this,u)},h(s,"",{},{cursor:"move"});var a=E(s),c=g(a),i=E(c);No(c,u=>n=u,()=>n),j(()=>{W(s,"data-index",t.index),W(a,"x",t.note.x-4),W(a,"y",t.note.y-o(l)/2-4),W(a,"width",o(r)+8),W(a,"height",o(l)+8),W(a,"fill",t.bgColor),W(a,"stroke",t.bgColor),W(c,"x",t.note.x),W(c,"y",t.note.y),W(c,"fill",t.textColor),me(i,t.note.text)}),U(e,s),Ee()}Se(["mousedown"]);var Yi=rn('<text font-family="Helvetica, Arial, sans-serif" font-size="14" font-weight="bold" pointer-events="none"> </text>'),Hi=rn('<g data-type="group"><rect fill-opacity="0.5" stroke-width="2" rx="4"></rect><!></g>');function Vi(e,t){ye(t,!0);let n=Y(()=>Math.abs(t.group.x2-t.group.x1)),r=Y(()=>Math.abs(t.group.y2-t.group.y1)),l=Y(()=>Math.min(t.group.x1,t.group.x2)),s=Y(()=>Math.min(t.group.y1,t.group.y2));var a=Hi(),c=E(a),i=g(c);{var u=d=>{var p=Yi(),_=E(p);j(()=>{W(p,"x",o(l)+8),W(p,"y",o(s)+18),W(p,"fill",t.textColor),me(_,t.group.name)}),U(d,p)};se(i,d=>{t.group.name&&d(u)})}j(()=>{W(a,"data-index",t.index),W(c,"x",o(l)),W(c,"y",o(s)),W(c,"width",o(n)),W(c,"height",o(r)),W(c,"fill",t.bgColor),W(c,"stroke",t.borderColor)}),U(e,a),Ee()}var zi=rn('<circle r="5" fill="#FFD700" stroke="#333" stroke-width="1"></circle>');function Wi(e,t){ye(t,!0);const n=()=>L(oo,"$mode",r),[r,l]=De();let s=te(!1),a=0,c=0,i=0,u=0;function d(_){if(n()==="Configuration"){if(_.button===2){_.preventDefault(),_.stopPropagation(),_t.update(y=>{const f=[...y],T={...f[t.connectionIndex]},v=[...T.waypoints??[]];return v.splice(t.waypointIndex,1),T.waypoints=v.length>0?v:void 0,f[t.connectionIndex]=T,f}),Tn.set(!0);return}if(_.button===0){_.stopPropagation(),F(s,!0),i=t.x,u=t.y,a=_.clientX,c=_.clientY;const y=T=>{var $;if(!o(s))return;const v=_.target.closest("svg");if(!v)return;v.getBoundingClientRect();const b=v.querySelector("#world"),x=($=b==null?void 0:b.getAttribute("transform"))==null?void 0:$.match(/scale\(([^)]+)\)/),w=x?parseFloat(x[1]):1,N=(T.clientX-a)/w,O=(T.clientY-c)/w;_t.update(R=>{const B=[...R],H={...B[t.connectionIndex]},S=[...H.waypoints??[]];return S[t.waypointIndex]=[i+N,u+O],H.waypoints=S,B[t.connectionIndex]=H,B})},f=()=>{F(s,!1),Tn.set(!0),window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",f)};window.addEventListener("mousemove",y),window.addEventListener("mouseup",f)}}}var p=zi();p.__mousedown=d,p.__contextmenu=_=>_.preventDefault(),h(p,"",{},{cursor:"move"}),j(()=>{W(p,"cx",t.x),W(p,"cy",t.y)}),U(e,p),Ee(),l()}Se(["mousedown","contextmenu"]);var ji=rn('<rect fill="none" stroke-width="2" stroke-dasharray="6,4" pointer-events="none"></rect>'),qi=rn('<svg class="w-full h-full"><g id="world"><g id="groups-layer"><!></g><g id="connections-layer"><!></g><g id="notes-layer"><!></g><g id="nodes-layer"></g><g id="handles-layer"><!></g></g><!></svg>');function Ki(e,t){ye(t,!0);const n=()=>L(ke,"$currentTheme",x),r=()=>L(Hn,"$panX",x),l=()=>L(gn,"$zoom",x),s=()=>L(Vn,"$panY",x),a=()=>L(vo,"$groupsModeActive",x),c=()=>L(oo,"$mode",x),i=()=>L(In,"$selectedNodeIndex",x),u=()=>L(_t,"$connections",x),d=()=>L(Jo,"$connectionStartNodeIndex",x),p=()=>L(He,"$nodes",x),_=()=>L(mn,"$pingResults",x),y=()=>L(Dn,"$displayOptions",x),f=()=>L(yn,"$groups",x),T=()=>L(Ml,"$isDark",x),v=()=>L(Oo,"$groupColorPresets",x),b=()=>L(Gn,"$stickyNotes",x),[x,w]=De();let N,O=te(!1),$=0,R=0,B=0,H=0,S=te(!1),z=null,q=te(!1),P=te(0),K=te(0),D=te(0),I=te(0),G=te(!1),M=null,X=Y(()=>Ie(n()));function ee(C,A){const V=N.getBoundingClientRect(),ne=C-V.left,J=A-V.top;return{x:(ne-r())/l(),y:(J-s())/l()}}function ve(C){if(C.button===2){C.preventDefault(),F(O,!0),$=C.clientX,R=C.clientY,B=r(),H=s();return}if(C.button===0&&a()&&c()==="Configuration"){const{x:A,y:V}=ee(C.clientX,C.clientY),ne=C.target;(ne===N||ne.closest("svg")===N&&!ne.closest("[data-type='group']")&&!ne.closest("[data-type='node']"))&&(F(q,!0),F(P,A,!0),F(K,V,!0),F(D,A,!0),F(I,V,!0));return}}function pe(C){if(o(O)){const A=C.clientX-$,V=C.clientY-R;Hn.set(B+A),Vn.set(H+V);return}if(o(q)){const{x:A,y:V}=ee(C.clientX,C.clientY);F(D,A,!0),F(I,V,!0);return}if(o(S)&&z!==null&&c()==="Configuration"){const{x:A,y:V}=ee(C.clientX,C.clientY);wi(z,A,V);return}if(o(G)&&M!==null&&c()==="Configuration"){const{x:A,y:V}=ee(C.clientX,C.clientY);Gn.update(ne=>{const J=[...ne];return J[M]&&(J[M]={...J[M],x:A,y:V}),J});return}}function ae(C){if(o(O)){F(O,!1);return}if(o(q)){F(q,!1);const A=Math.min(o(P),o(D)),V=Math.min(o(K),o(I)),ne=Math.max(o(P),o(D)),J=Math.max(o(K),o(I));Math.abs(ne-A)>20&&Math.abs(J-V)>20&&Ci({x1:A,y1:V,x2:ne,y2:J,name:"New Group",color:"",light_bg:"#e3f0ff",light_border:"#3a7bd5",dark_bg:"#22304a",dark_border:"#3a7bd5",color_preset_id:"preset1"});return}if(o(S)){F(S,!1),z=null;return}if(o(G)){F(G,!1),M=null;return}}function ge(C){C.preventDefault();const A=C.deltaY<0?1.1:.9,V=N.getBoundingClientRect(),ne=C.clientX-V.left,J=C.clientY-V.top,xe=l()*A,Pe=ne-(ne-r())*A,Oe=J-(J-s())*A;gn.set(xe),Hn.set(Pe),Vn.set(Oe)}function ue(C){if(c()!=="Configuration"||a())return;if(C.shiftKey){const{x:ne,y:J}=ee(C.clientX,C.clientY);Te.set("stickyNote"),window.__stickyNotePosition={x:ne,y:J};return}const{x:A,y:V}=ee(C.clientX,C.clientY);Te.set("nodeEditor"),window.__newNodePosition={x:A,y:V},window.__editNodeIndex=null}function ce(C){C.preventDefault()}function Be(C,A){if(C.button===0)mi.set(i()),In.set(A),c()==="Configuration"&&!a()&&(F(S,!0),z=A),Wl(A);else if(C.button===1){if(C.preventDefault(),c()!=="Configuration")return;if(C.shiftKey){const ne=u().findIndex(J=>J.from===A||J.to===A);ne>=0&&_r(ne);return}d()===null?Jo.set(A):d()!==A&&(window.__connectionFromIndex=d(),window.__connectionToIndex=A,window.__editConnectionIndex=null,Te.set("connectionEditor"),Jo.set(null))}else C.button===2&&(C.preventDefault(),C.stopPropagation(),So.set({visible:!0,x:C.clientX,y:C.clientY,nodeIndex:A,connectionIndex:null}))}function _e(C,A){C.button===0&&c()==="Configuration"?(F(G,!0),M=A):C.button===2&&c()==="Configuration"&&(C.preventDefault(),So.set({visible:!0,x:C.clientX,y:C.clientY,nodeIndex:null,connectionIndex:null}),window.__contextStickyIndex=A)}function k(C,A){if(c()!=="Configuration"||C.button!==1)return;if(C.preventDefault(),C.shiftKey){_r(A);return}const{x:V,y:ne}=ee(C.clientX,C.clientY),J=u()[A],xe=p()[J.from],Pe=p()[J.to],Oe=zl(xe.x,xe.y,Pe.x,Pe.y,J.waypoints),It=$i(V,ne,Oe),tt=[...J.waypoints??[]];tt.splice(It,0,[V,ne]),_t.update(jt=>{const pt=[...jt];return pt[A]={...pt[A],waypoints:tt},pt}),Tn.set(!0)}function Ce(C,A){if(C.button!==2)return;C.preventDefault(),window.__editConnectionIndex=A;const V=u()[A];window.__connectionFromIndex=V.from,window.__connectionToIndex=V.to,Te.set("connectionEditor")}function Re(C,A){const V=_()[C];if(!V||V.length===0)return A;const ne=V.every(xe=>xe),J=V.some(xe=>xe);return ne?o(X).NODE_PING_SUCCESS:J?o(X).NODE_PING_PARTIAL_SUCCESS:o(X).NODE_PING_FAILURE}var fe=qi();fe.__mousedown=ve,fe.__mousemove=pe,fe.__mouseup=ae,fe.__dblclick=ue,fe.__contextmenu=ce;let Ge;var Xe=E(fe),Fe=E(Xe),Je=E(Fe);{var Ke=C=>{var A=mt(),V=Le(A);Ae(V,1,f,$e,(ne,J,xe)=>{const Pe=Y(()=>xi(o(J).color_preset_id,T(),v()));Vi(ne,{get group(){return o(J)},index:xe,get bgColor(){return o(Pe).bg},get borderColor(){return o(Pe).border},get textColor(){return o(X).GROUP_TEXT}})}),U(C,A)};se(Je,C=>{y().show_groups!==!1&&C(Ke)})}var et=g(Fe),Ne=E(et);{var he=C=>{var A=mt(),V=Le(A);Ae(V,1,u,$e,(ne,J,xe)=>{var Pe=mt(),Oe=Le(Pe);{var It=tt=>{{let jt=Y(()=>y().show_connection_labels!==!1),pt=Y(()=>c()==="Configuration");Fi(tt,{get connection(){return o(J)},index:xe,get fromNode(){return p()[o(J).from]},get toNode(){return p()[o(J).to]},get lineColor(){return o(X).Connections},get textColor(){return o(X).INFO_TEXT},get labelBgColor(){return o(X).INFO_NOTE_BG},get showLabels(){return o(jt)},get showHandles(){return o(pt)},onMiddleClick:sn=>k(sn,xe),onRightClick:sn=>Ce(sn,xe)})}};se(Oe,tt=>{p()[o(J).from]&&p()[o(J).to]&&tt(It)})}U(ne,Pe)}),U(C,A)};se(Ne,C=>{y().show_connections!==!1&&C(he)})}var Ve=g(et),Qe=E(Ve);{var Wt=C=>{var A=mt(),V=Le(A);Ae(V,1,b,$e,(ne,J,xe)=>{Mi(ne,{get note(){return o(J)},index:xe,get textColor(){return o(X).INFO_TEXT},get bgColor(){return o(X).INFO_NOTE_BG},onMouseDown:Pe=>_e(Pe,xe)})}),U(C,A)};se(Qe,C=>{y().show_notes!==!1&&C(Wt)})}var it=g(Ve);Ae(it,5,p,$e,(C,A,V)=>{{let ne=Y(()=>Re(V,o(X).NODE_DEFAULT)),J=Y(()=>i()===V?o(X).NODE_HIGHLIGHT:o(X).NODE_OUTLINE_DEFAULT),xe=Y(()=>i()===V?4:2),Pe=Y(()=>y().node_size??14);Ii(C,{get node(){return o(A)},index:V,get fillColor(){return o(ne)},get outlineColor(){return o(J)},get outlineWidth(){return o(xe)},get textColor(){return o(X).BUTTON_TEXT},get fontSize(){return o(Pe)},onMouseDown:Oe=>Be(Oe,V)})}});var vt=g(it),Ct=E(vt);{var St=C=>{var A=mt(),V=Le(A);Ae(V,1,u,$e,(ne,J,xe)=>{var Pe=mt(),Oe=Le(Pe);{var It=tt=>{var jt=mt(),pt=Le(jt);Ae(pt,17,()=>o(J).waypoints,$e,(sn,ko,Kl)=>{Wi(sn,{get x(){return o(ko)[0]},get y(){return o(ko)[1]},connectionIndex:xe,waypointIndex:Kl})}),U(tt,jt)};se(Oe,tt=>{o(J).waypoints&&tt(It)})}U(ne,Pe)}),U(C,A)};se(Ct,C=>{c()==="Configuration"&&C(St)})}var ln=g(Xe);{var Fn=C=>{var A=ji();j((V,ne,J,xe)=>{W(A,"x",V),W(A,"y",ne),W(A,"width",J),W(A,"height",xe),W(A,"stroke",o(X).GROUP_OUTLINE)},[()=>Math.min(o(P),o(D))*l()+r(),()=>Math.min(o(K),o(I))*l()+s(),()=>Math.abs(o(D)-o(P))*l(),()=>Math.abs(o(I)-o(K))*l()]),U(C,A)};se(ln,C=>{o(q)&&C(Fn)})}No(fe,C=>N=C,()=>N),j(()=>{Ge=h(fe,"",Ge,{"background-color":o(X).FRAME_BG,cursor:o(O)?"grabbing":a()?"crosshair":"default"}),W(Xe,"transform",`translate(${r()??""},${s()??""}) scale(${l()??""})`)}),zo("wheel",fe,ge),U(e,fe),Ee(),w()}Se(["mousedown","mousemove","mouseup","dblclick","contextmenu"]);function Zi(e,t){const n={name:t.name,ip:"",file:t.file_path||"",web:t.web_config_url||"",rdp:t.remote_desktop_address||""};for(const[r,l]of Object.entries(t.vlans))n[r.toLowerCase()]=l||"";for(const r of Object.values(t.vlans))if(r){n.ip=r;break}return e.replace(/\{(\w+)\}/g,(r,l)=>{const s=l.toLowerCase();return n[s]??r})}async function Ji(e){if(e)try{await Nt("open_rdp",{address:e})}catch(t){console.error("Failed to open RDP:",t)}}async function Qi(e){if(e)try{await Nt("open_file_explorer",{path:e})}catch(t){console.error("Failed to open file explorer:",t)}}async function ea(e){if(e)try{await Nt("open_browser",{url:e})}catch(t){console.error("Failed to open browser:",t)}}async function ta(e,t){const n=Zi(e,t);try{await Nt("execute_command",{command:n})}catch(r){console.error("Failed to execute command:",r)}}async function na(){try{return await Nt("get_local_ips")}catch(e){return console.error("Failed to get local IPs:",e),[]}}var oa=Z('<span style="margin-right: 4px;">&#9881;</span>'),ra=Z("<button>VLAN Config</button> <button>Node List</button> <button>Connections List</button> <button> </button>",1),la=Z("<div><button>Start Menu</button> <button><!> </button> <button>Display Options</button> <!> <button>Who am I?</button> <button>Clear Status</button> <button>Ping All</button></div>");function sa(e,t){ye(t,!0);const n=()=>L(ke,"$currentTheme",a),r=()=>L(vo,"$groupsModeActive",a),l=()=>L(He,"$nodes",a),s=()=>L(oo,"$mode",a),[a,c]=De();let i=Y(()=>Ie(n())),u=Y(()=>n()==="ironclad"),d=te(!1);function p(){oo.update(M=>M==="Operator"?"Configuration":"Operator"),r()&&vo.set(!1),o(u)&&(F(d,!0),setTimeout(()=>F(d,!1),300))}function _(){vo.update(M=>!M)}async function y(){try{const M=await na(),X=l();for(let ee=0;ee<X.length;ee++){const ve=X[ee];Object.values(ve.vlans).some(ae=>M.includes(ae))&&mn.update(ae=>({...ae,[ee]:[!0]}))}}catch{}}let f=Y(()=>"px-3 py-1.5 text-xs font-medium rounded transition-colors"+(o(u)?" ironclad-btn":""));var T=la();let v;var b=E(T);b.__click=()=>Uo.set(!0);let x;var w=g(b,2);w.__click=p;let N;var O=E(w);{var $=M=>{var X=oa();j(()=>Q(X,1,`inline-block ${o(d)?"valve-turning":""}`)),U(M,X)};se(O,M=>{o(u)&&M($)})}var R=g(O),B=g(w,2);B.__click=()=>Te.set("displayOptions");let H;var S=g(B,2);{var z=M=>{var X=ra(),ee=Le(X);ee.__click=()=>Te.set("vlanConfig");let ve;var pe=g(ee,2);pe.__click=()=>Te.set("nodeList");let ae;var ge=g(pe,2);ge.__click=()=>Te.set("connectionList");let ue;var ce=g(ge,2);ce.__click=_;let Be;var _e=E(ce);j(()=>{Q(ee,1,de(o(f))),ve=h(ee,"",ve,{"background-color":o(i).BUTTON_BG,color:o(i).BUTTON_TEXT}),Q(pe,1,de(o(f))),ae=h(pe,"",ae,{"background-color":o(i).BUTTON_BG,color:o(i).BUTTON_TEXT}),Q(ge,1,de(o(f))),ue=h(ge,"",ue,{"background-color":o(i).BUTTON_BG,color:o(i).BUTTON_TEXT}),Q(ce,1,o(f)),Be=h(ce,"",Be,{"background-color":r()?o(i).BUTTON_ACTIVE_BG:o(i).BUTTON_BG,color:o(i).BUTTON_TEXT}),me(_e,r()?"Groups (Active)":"Groups")}),U(M,X)};se(S,M=>{s()==="Configuration"&&M(z)})}var q=g(S,2);q.__click=y;let P;var K=g(q,2);K.__click=()=>Ui();let D;var I=g(K,2);I.__click=()=>Ai();let G;j(()=>{Q(T,1,`flex items-center gap-1 px-2 py-1 flex-wrap ${o(u)?"ironclad-panel":""}`),v=h(T,"",v,{"background-color":o(i).FRAME_BG,"border-bottom":`1px solid ${o(i).BORDER_COLOR??""}`}),Q(b,1,`${o(f)??""} font-bold`),x=h(b,"",x,{"background-color":o(i).BUTTON_BG,color:o(i).BUTTON_TEXT}),Q(w,1,de(o(f))),N=h(w,"",N,{"background-color":s()==="Configuration"?o(i).BUTTON_CONFIGURATION_MODE:o(i).BUTTON_BG,color:o(i).BUTTON_TEXT}),me(R,` ${s()??""} Mode`),Q(B,1,de(o(f))),H=h(B,"",H,{"background-color":o(i).BUTTON_BG,color:o(i).BUTTON_TEXT}),Q(q,1,de(o(f))),P=h(q,"",P,{"background-color":o(i).BUTTON_BG,color:o(i).BUTTON_TEXT}),Q(K,1,de(o(f))),D=h(K,"",D,{"background-color":o(i).BUTTON_BG,color:o(i).BUTTON_TEXT}),Q(I,1,de(o(f))),G=h(I,"",G,{"background-color":o(i).BUTTON_BG,color:o(i).BUTTON_TEXT})}),U(e,T),Ee(),c()}Se(["click"]);function ia(e,t){return t.filter(n=>{const r=e.vlans[n];return r!=null&&r!==""}).map(n=>({key:n,value:e.vlans[n]}))}var aa=Z('<div class="text-sm flex items-center gap-2 py-0.5"><span class="opacity-60"> </span> <span class="px-1 rounded"> </span></div>'),ca=Z('<div><div class="text-sm font-medium mb-2"><span class="opacity-60">Name:</span> <span class="ml-2"> </span></div> <!></div>');function ua(e,t){ye(t,!0);const n=()=>L(ke,"$currentTheme",i),r=()=>L(In,"$selectedNodeIndex",i),l=()=>L(He,"$nodes",i),s=()=>L($t,"$vlanLabelOrder",i),a=()=>L(mn,"$pingResults",i),c=()=>L(Ht,"$vlanLabels",i),[i,u]=De();let d=Y(()=>Ie(n())),p=Y(()=>n()==="ironclad"),_=Y(()=>r()!==null?l()[r()]:null),y=Y(()=>o(_)?ia(o(_),s()):[]),f=Y(()=>r()!==null?a()[r()]:void 0);function T(w){return!o(f)||w>=o(f).length?null:o(f)[w]?o(d).NODE_PING_SUCCESS:o(d).NODE_PING_FAILURE}var v=mt(),b=Le(v);{var x=w=>{var N=ca();let O;var $=E(N),R=g(E($),2),B=E(R),H=g($,2);Ae(H,17,()=>o(y),$e,(S,z,q)=>{var P=aa(),K=E(P),D=E(K),I=g(K,2);let G;var M=E(I);j(X=>{me(D,`${c()[o(z).key]??o(z).key??""}:`),G=h(I,"",G,X),me(M,o(z).value)},[()=>({"background-color":T(q)??"transparent",color:T(q)?"#fff":o(d).INFO_TEXT})]),U(S,P)}),j(()=>{Q(N,1,`absolute top-2 right-2 p-3 rounded shadow-lg min-w-[180px] ${o(p)?"ironclad-panel":""}`),O=h(N,"",O,{"background-color":o(d).INFO_NOTE_BG,color:o(d).INFO_TEXT,border:`1px solid ${o(d).BORDER_COLOR??""}`}),me(B,o(_).name)}),U(w,N)};se(b,w=>{o(_)&&w(x)})}U(e,v),Ee(),u()}var fa=Z('<div class="absolute bottom-2 left-2 flex items-center gap-1 px-2 py-1 rounded shadow"><button>+</button> <button> </button> <button>&ndash;</button></div>');function da(e,t){ye(t,!0);const n=()=>L(ke,"$currentTheme",l),r=()=>L(yi,"$zoomPercent",l),[l,s]=De();let a=Y(()=>Ie(n())),c=Y(()=>n()==="ironclad");function i(){gn.update(b=>b*1.1)}function u(){gn.update(b=>b*.9)}function d(){gn.set(1),Hn.set(0),Vn.set(0)}var p=fa();let _;var y=E(p);y.__click=i;var f=g(y,2);f.__click=d;var T=E(f),v=g(f,2);v.__click=u,j(()=>{_=h(p,"",_,{"background-color":o(a).FRAME_BG,color:o(a).BUTTON_TEXT,border:`1px solid ${o(a).BORDER_COLOR??""}`}),Q(y,1,`px-2 py-0.5 text-sm cursor-pointer hover:opacity-70 ${o(c)?"ironclad-btn rounded":""}`),Q(f,1,`px-2 py-0.5 text-sm cursor-pointer hover:opacity-70 min-w-[3rem] text-center ${o(c)?"ironclad-btn rounded":""}`),me(T,`${r()??""}%`),Q(v,1,`px-2 py-0.5 text-sm cursor-pointer hover:opacity-70 ${o(c)?"ironclad-btn rounded":""}`)}),U(e,p),Ee(),s()}Se(["click"]);var _a=Z('<div class="text-center py-1 text-sm font-bold">Groups Mode Active: Click and Drag to create a group. Click a group to edit.</div>');function va(e,t){ye(t,!0);const n=()=>L(ke,"$currentTheme",l),r=()=>L(vo,"$groupsModeActive",l),[l,s]=De();let a=Y(()=>Ie(n()));var c=mt(),i=Le(c);{var u=d=>{var p=_a();let _;j(()=>_=h(p,"",_,{"background-color":o(a).FRAME_BG,color:"#ff9900"})),U(d,p)};se(i,d=>{r()&&d(u)})}U(e,c),Ee(),s()}var pa=Z('<div class="border-t"></div> <button class="block w-full text-left px-4 py-2 text-sm hover:opacity-80">Delete Node</button>',1),ha=Z('<button class="block w-full text-left px-4 py-2 text-sm hover:opacity-80"> </button>'),ba=Z('<div class="border-t"></div> <!>',1),ga=Z('<button class="block w-full text-left px-4 py-2 text-sm hover:opacity-80">Edit Node Information</button> <button class="block w-full text-left px-4 py-2 text-sm hover:opacity-80">Open Remote Desktop</button> <button class="block w-full text-left px-4 py-2 text-sm hover:opacity-80">Open File Explorer</button> <button class="block w-full text-left px-4 py-2 text-sm hover:opacity-80">Open Web Browser</button> <!>  <!>',1),Ta=Z('<button class="block w-full text-left px-4 py-2 text-sm hover:opacity-80">Delete Sticky Note</button>'),ma=Z('<div class="fixed z-50 shadow-lg rounded overflow-hidden"><!></div>');function ya(e,t){ye(t,!0);const n=()=>L(ke,"$currentTheme",c),r=()=>L(So,"$contextMenu",c),l=()=>L(He,"$nodes",c),s=()=>L(fn,"$customCommands",c),a=()=>L(oo,"$mode",c),[c,i]=De();let u=Y(()=>Ie(n()));function d(){So.set({visible:!1,x:0,y:0,nodeIndex:null,connectionIndex:null}),window.__contextStickyIndex=void 0}function p(b){b(),d()}function _(){r().visible&&d()}function y(b){const x=l()[b];if(!x)return[];const w=[];for(const[N,O]of Object.entries(s())){let $,R=null;typeof O=="string"?$=O:($=O.template,R=O.applicable_nodes),!(R!==null&&!R.includes(x.name))&&w.push({name:N,template:$})}return w}var f=mt();zo("click",po,_);var T=Le(f);{var v=b=>{var x=ma();x.__click=R=>R.stopPropagation();let w;var N=E(x);{var O=R=>{const B=Y(()=>r().nodeIndex),H=Y(()=>l()[o(B)]);var S=mt(),z=Le(S);{var q=P=>{const K=Y(()=>y(o(B)));var D=ga(),I=Le(D);I.__click=()=>p(()=>{window.__editNodeIndex=o(B),window.__newNodePosition=null,Te.set("nodeEditor")});let G;var M=g(I,2);M.__click=()=>p(()=>Ji(o(H).remote_desktop_address));let X;var ee=g(M,2);ee.__click=()=>p(()=>Qi(o(H).file_path));let ve;var pe=g(ee,2);pe.__click=()=>p(()=>ea(o(H).web_config_url));let ae;var ge=g(pe,2);{var ue=_e=>{var k=pa(),Ce=Le(k);let Re;var fe=g(Ce,2);fe.__click=()=>p(()=>Hl(o(B))),h(fe,"",{},{color:"#ef4444"}),j(()=>Re=h(Ce,"",Re,{"border-color":o(u).BORDER_COLOR})),U(_e,k)};se(ge,_e=>{a()==="Configuration"&&_e(ue)})}var ce=g(ge,2);{var Be=_e=>{var k=ba(),Ce=Le(k);let Re;var fe=g(Ce,2);Ae(fe,17,()=>o(K),$e,(Ge,Xe)=>{var Fe=ha();Fe.__click=()=>p(()=>ta(o(Xe).template,o(H)));let Je;var Ke=E(Fe);j(()=>{Je=h(Fe,"",Je,{color:o(u).BUTTON_TEXT}),me(Ke,o(Xe).name)}),U(Ge,Fe)}),j(()=>Re=h(Ce,"",Re,{"border-color":o(u).BORDER_COLOR})),U(_e,k)};se(ce,_e=>{o(K).length>0&&_e(Be)})}j(()=>{G=h(I,"",G,{color:o(u).BUTTON_TEXT}),X=h(M,"",X,{color:o(u).BUTTON_TEXT}),ve=h(ee,"",ve,{color:o(u).BUTTON_TEXT}),ae=h(pe,"",ae,{color:o(u).BUTTON_TEXT})}),U(P,D)};se(z,P=>{o(H)&&P(q)})}U(R,S)},$=R=>{var B=mt(),H=Le(B);{var S=z=>{const q=Y(()=>window.__contextStickyIndex);var P=Ta();P.__click=()=>p(()=>ki(o(q))),h(P,"",{},{color:"#ef4444"}),U(z,P)};se(H,z=>{window.__contextStickyIndex!==void 0&&z(S)},!0)}U(R,B)};se(N,R=>{r().nodeIndex!==null?R(O):R($,!1)})}j(()=>w=h(x,"",w,{left:`${r().x??""}px`,top:`${r().y??""}px`,"background-color":o(u).BUTTON_BG,border:`1px solid ${o(u).BORDER_COLOR??""}`})),U(b,x)};se(T,b=>{r().visible&&b(v)})}U(e,f),Ee(),i()}Se(["click"]);async function Ea(e={}){return typeof e=="object"&&Object.freeze(e),await Nt("plugin:dialog|open",{options:e})}async function xa(e={}){return typeof e=="object"&&Object.freeze(e),await Nt("plugin:dialog|save",{options:e})}const jl=we({hideStartMenuOnStartup:!1,lastFilePath:"",windowGeometry:""});function wa(e){var y;const t=new Set(Object.keys(e.vlan_labels??{})),n=new Set;for(const f of e.nodes??[])for(const T of Object.keys(f))T.startsWith("VLAN_")&&n.add(T);const r=new Set([...t,...n]),l={};for(const f of r)l[f]=((y=e.vlan_labels)==null?void 0:y[f])??f;let s;if(e.vlan_label_order){s=e.vlan_label_order.filter(f=>f in l);for(const f of Object.keys(l))s.includes(f)||s.push(f)}else s=Object.keys(l);const a=(e.nodes??[]).map(f=>{const T={};for(const v of Object.keys(f))v.startsWith("VLAN_")&&(T[v]=String(f[v]??""));return{name:f.name,x:f.x,y:f.y,vlans:T,remote_desktop_address:f.remote_desktop_address??"",file_path:f.file_path??"",web_config_url:f.web_config_url??""}}),c=(e.connections??[]).map(f=>{var T;return{from:f.from,to:f.to,label:f.label??"",connectioninfo:f.connectioninfo,waypoints:(T=f.waypoints)==null?void 0:T.map(v=>[v[0],v[1]]),label_pos:f.label_pos??.5}}),i=(e.stickynotes??[]).map(f=>({text:f.text,x:f.x,y:f.y})),u=(e.groups??[]).map(f=>({x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,name:f.name??"",color:f.color??"",light_bg:f.light_bg??"",light_border:f.light_border??"",dark_bg:f.dark_bg??"",dark_border:f.dark_border??"",color_preset_id:f.color_preset_id??"preset1"})),d=e.group_color_presets??[...Wo],p=e.custom_commands??{},_=e.display_options??{node_size:14,show_connections:!0,show_connection_labels:!0,show_notes:!0,show_groups:!0};return{nodes:a,connections:c,stickyNotes:i,groups:u,vlanLabels:l,vlanLabelOrder:s,groupColorPresets:d,customCommands:p,displayOptions:_}}function Na(e){const t=e.nodes.map(r=>{const l={name:r.name,x:r.x,y:r.y,remote_desktop_address:r.remote_desktop_address,file_path:r.file_path,web_config_url:r.web_config_url};for(const[s,a]of Object.entries(r.vlans))l[s]=a;for(const s of Object.keys(e.vlanLabels))s in l||(l[s]="");return l}),n=e.connections.map(r=>{const l={from:r.from,to:r.to,label:r.label};return r.label_pos!==void 0&&r.label_pos!==.5&&(l.label_pos=r.label_pos),r.connectioninfo&&(l.connectioninfo=r.connectioninfo),r.waypoints&&r.waypoints.length>0&&(l.waypoints=r.waypoints),l});return{nodes:t,connections:n,vlan_labels:e.vlanLabels,vlan_label_order:e.vlanLabelOrder,stickynotes:e.stickyNotes,groups:e.groups,group_color_presets:e.groupColorPresets,custom_commands:e.customCommands,display_options:e.displayOptions}}async function vr(e){try{let t=e;if(!t){const s=await Ea({multiple:!1,filters:[{name:"JSON",extensions:["json"]}]});if(!s)return;t=s}const n=await Nt("load_file",{path:t}),r=JSON.parse(n),l=wa(r);Vl(),He.set(l.nodes),_t.set(l.connections),Gn.set(l.stickyNotes),yn.set(l.groups),Ht.set(l.vlanLabels),$t.set(l.vlanLabelOrder),Oo.set(l.groupColorPresets),fn.set(l.customCommands),Dn.set(l.displayOptions),mn.set({}),Io.set(t),In.set(null),gn.set(1),Hn.set(0),Vn.set(0),Tn.set(!1),jl.update(s=>({...s,lastFilePath:t}));try{await Nt("save_settings",{settings:{last_file_path:t}})}catch{}}catch(t){console.error("Failed to load file:",t)}}async function ql(e=!1){try{let t=ot(Io);if(!t||e){const l=await xa({filters:[{name:"JSON",extensions:["json"]}]});if(!l)return;t=l}const n=Na({nodes:ot(He),connections:ot(_t),stickyNotes:ot(Gn),groups:ot(yn),vlanLabels:ot(Ht),vlanLabelOrder:ot($t),groupColorPresets:ot(Oo),customCommands:ot(fn),displayOptions:ot(Dn)}),r=JSON.stringify(n,null,4);await Nt("save_file",{path:t,content:r}),Io.set(t),Tn.set(!1),jl.update(l=>({...l,lastFilePath:t}));try{await Nt("save_settings",{settings:{last_file_path:t}})}catch{}}catch(t){console.error("Failed to save file:",t)}}async function Oa(){Vl(),Io.set(null),In.set(null),gn.set(1),Hn.set(0),Vn.set(0),Tn.set(!1)}var ka=Z("<button> </button>"),Ca=Z('<div class="fixed inset-0 z-40"></div> <div class="fixed z-50 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[320px] rounded-lg shadow-xl overflow-hidden"><div class="flex justify-center py-4"><div class="w-20 h-20 rounded-lg flex items-center justify-center text-2xl font-bold">NS</div></div> <div class="px-4 pb-4 space-y-2"><button>Create New Network</button> <button>Save</button> <button>Load</button> <div class="flex gap-1"></div> <button>Configuration Menu</button> <button>Help</button> <button>Close</button></div></div>',1);function Ra(e,t){ye(t,!0);const n=()=>L(ke,"$currentTheme",r),[r,l]=De();let s=Y(()=>Ie(n())),a=Y(()=>n()==="ironclad");function c(){Uo.set(!1)}function i(){Oa(),c()}async function u(){await ql(),c()}async function d(){await vr(),c()}const p=[{name:"light",label:"Light"},{name:"dark",label:"Dark"},{name:"ironclad",label:"Ironclad"}];function _(ve){ke.set(ve)}function y(){c(),Te.set("customCommands")}function f(){c(),Te.set("help")}let T="w-full py-2 text-sm rounded hover:opacity-80 transition-opacity";var v=Ca(),b=Le(v);b.__click=c,h(b,"",{},{"background-color":"rgba(0,0,0,0.3)"});var x=g(b,2);x.__click=ve=>ve.stopPropagation();let w;var N=E(x),O=E(N);let $;var R=g(N,2),B=E(R);Q(B,1,de(T)),B.__click=i;let H;var S=g(B,2);Q(S,1,de(T)),S.__click=u;let z;var q=g(S,2);Q(q,1,de(T)),q.__click=d;let P;var K=g(q,2);Ae(K,21,()=>p,$e,(ve,pe)=>{var ae=ka();ae.__click=()=>_(o(pe).name);let ge;var ue=E(ae);j(()=>{Q(ae,1,`w-full py-2 text-sm rounded hover:opacity-80 transition-opacity ${o(a)?"ironclad-btn":""}`),ge=h(ae,"",ge,{"background-color":n()===o(pe).name?o(s).BUTTON_ACTIVE_BG:o(s).BUTTON_BG,color:n()===o(pe).name?o(s).BUTTON_ACTIVE_TEXT:o(s).BUTTON_TEXT}),me(ue,o(pe).label)}),U(ve,ae)});var D=g(K,2);Q(D,1,de(T)),D.__click=y;let I;var G=g(D,2);Q(G,1,de(T)),G.__click=f;let M;var X=g(G,2);Q(X,1,de(T)),X.__click=c;let ee;j(()=>{w=h(x,"",w,{border:`2px solid ${o(s).BORDER_COLOR??""}`,"background-color":o(s).FRAME_BG}),$=h(O,"",$,{"background-color":o(s).BUTTON_BG,color:o(s).BUTTON_TEXT}),H=h(B,"",H,{"background-color":o(s).BUTTON_BG,color:o(s).BUTTON_TEXT}),z=h(S,"",z,{"background-color":o(s).BUTTON_BG,color:o(s).BUTTON_TEXT}),P=h(q,"",P,{"background-color":o(s).BUTTON_BG,color:o(s).BUTTON_TEXT}),I=h(D,"",I,{"background-color":o(s).BUTTON_BG,color:o(s).BUTTON_TEXT}),M=h(G,"",M,{"background-color":o(s).BUTTON_BG,color:o(s).BUTTON_TEXT}),ee=h(X,"",ee,{"background-color":o(s).BUTTON_BG,color:o(s).BUTTON_TEXT})}),U(e,v),Ee(),l()}Se(["click"]);var Ba=Z('<div class="fixed inset-0 z-40"></div> <div><div><span class="text-sm font-medium"> </span> <button class="text-sm px-2 py-0.5 rounded hover:opacity-70">X</button></div> <div class="p-4 overflow-auto"><!></div></div>',1);function kt(e,t){ye(t,!0);const n=()=>L(ke,"$currentTheme",r),[r,l]=De();let s=Ti(t,"width",3,400),a=Y(()=>Ie(n())),c=Y(()=>n()==="ironclad"),i=te(!1),u=0,d=0,p=te(-1),_=te(-1),y;function f(){t.onClose?t.onClose():Te.set(null)}function T(D){F(i,!0),u=D.clientX-o(p),d=D.clientY-o(_);const I=M=>{o(i)&&(F(p,M.clientX-u),F(_,M.clientY-d))},G=()=>{F(i,!1),window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",G)};window.addEventListener("mousemove",I),window.addEventListener("mouseup",G)}function v(D){D.key==="Escape"&&f()}Nr(()=>{if(y&&o(p)===-1){const D=y.getBoundingClientRect();F(p,(window.innerWidth-D.width)/2),F(_,(window.innerHeight-D.height)/2)}});var b=Ba();zo("keydown",po,v);var x=Le(b);x.__click=f,h(x,"",{},{"background-color":"rgba(0,0,0,0.3)"});var w=g(x,2);w.__click=D=>D.stopPropagation();let N;var O=E(w);O.__mousedown=T;let $;var R=E(O);let B;var H=E(R),S=g(R,2);S.__click=f;let z;var q=g(O,2);let P;var K=E(q);ii(K,()=>t.children),No(w,D=>y=D,()=>y),j(()=>{Q(w,1,`fixed z-50 rounded shadow-xl overflow-hidden ${o(c)?"ironclad-panel":""}`),N=h(w,"",N,{left:`${o(p)??""}px`,top:`${o(_)??""}px`,width:`${s()??""}px`,border:`2px solid ${o(a).BORDER_COLOR??""}`,"background-color":o(a).FRAME_BG}),Q(O,1,`flex items-center justify-between px-3 py-2 cursor-move select-none ${o(c)?"ironclad-titlebar":""}`),$=h(O,"",$,{"background-color":o(c)?void 0:o(a).FRAME_BG,"border-bottom":`1px solid ${o(a).BORDER_COLOR??""}`}),B=h(R,"",B,{color:o(a).BUTTON_TEXT}),me(H,t.title),z=h(S,"",z,{color:o(a).BUTTON_TEXT,"background-color":o(a).FRAME_BG}),P=h(q,"",P,{"max-height":"80vh","background-color":o(a).FRAME_BG})}),U(e,b),Ee(),l()}Se(["click","mousedown"]);var La=Z(`<div class="text-sm space-y-4"><h2 class="text-base font-bold">Help</h2> <div><h3 class="font-bold mb-1">Overview:</h3> <p>NodeSailor is a simple network visualization tool. It allows the user to create a network map, display and test their connections with options for pinging, quick launchers for file explorer, web browser, RDP and more with the implementation of custom commands.</p></div> <div><h3 class="font-bold mb-1">User Modes:</h3> <ul class="list-disc pl-5 space-y-0.5"><li><strong>Operator:</strong> Monitor and interact with the network.</li> <li><strong>Configuration:</strong> Build and edit the network layout.</li></ul></div> <div><h3 class="font-bold mb-1">Operator Mode:</h3> <ul class="list-disc pl-5 space-y-0.5"><li>Left Click on Node: Ping the node (Green = all IPs connected, Yellow = partial, Red = no connection).</li> <li>Right Click on Node: Open context menu.</li> <li>Right Click and Drag: Pan the canvas.</li> <li>Scroll Wheel: Zoom in and out.</li> <li>Who am I?: Highlight node matching active system IP address.</li> <li>Ping All: Ping every node.</li> <li>Clear Status: Reset node status.</li></ul></div> <div><h3 class="font-bold mb-1">Configuration Mode:</h3> <ul class="list-disc pl-5 space-y-0.5"><li>Double Left Click: Create a new node.</li> <li>Shift + Double Left Click: Add a sticky note.</li> <li>Middle Click: Create a connection line between two nodes.</li> <li>Shift + Middle Click: Remove connection line.</li> <li>Left Click + Drag: Move nodes or notes.</li> <li>Right Click on Node: Open context menu.</li></ul></div> <div><h3 class="font-bold mb-1">Groups:</h3> <p>Groups allow the configurator to visually organize nodes into labeled rectangles. Use the Groups button to create, edit, or remove groups.</p></div> <div><h3 class="font-bold mb-1">Node List Editor:</h3> <p>Presents all nodes in a table for quick editing. Access via the Node List button.</p></div> <div><h3 class="font-bold mb-1">Custom Commands:</h3> <ul class="list-disc pl-5 space-y-0.5"><li>Access through 'Start Menu &gt; Configuration Menu'.</li> <li>Use placeholders like &#123;ip&#125;, &#123;name&#125;, &#123;file&#125;, &#123;web&#125;.</li> <li>Example: ping &#123;ip&#125; -t</li></ul></div> <div><h3 class="font-bold mb-1">Keyboard Shortcuts:</h3> <ul class="list-disc pl-5 space-y-0.5"><li>Ctrl+Shift+C: Change color theme</li> <li>Ctrl+S: Save</li> <li>Ctrl+L: Load</li> <li>F1: Help</li> <li>Arrow keys: Pan canvas</li></ul></div></div>`);function Da(e,t){ye(t,!0);const n=()=>L(ke,"$currentTheme",r),[r,l]=De();let s=Y(()=>Ie(n()));function a(){Te.set(null)}kt(e,{title:"Help - Keyboard Shortcuts and Functions",width:550,onClose:a,children:(c,i)=>{var u=La();let d;j(()=>d=h(u,"",d,{color:o(s).BUTTON_TEXT})),U(c,u)},$$slots:{default:!0}}),Ee(),l()}var $a=Z('<div><label class="block text-xs mb-1"> </label> <input type="text"/></div>'),Aa=Z('<p class="text-xs text-orange-400"> </p>'),Ua=Z('<div class="space-y-3"><div><label class="block text-xs mb-1">Node Name:</label> <input type="text"/></div> <!> <div><label class="block text-xs mb-1">Remote Desktop Address:</label> <input type="text"/></div> <div><label class="block text-xs mb-1">File Path:</label> <input type="text"/></div> <div><label class="block text-xs mb-1">Web Config URL:</label> <input type="text"/></div> <!> <button class="w-full py-2 text-sm rounded">Save</button></div>');function Sa(e,t){var $,R,B,H;ye(t,!0);const n=()=>L(ke,"$currentTheme",c),r=()=>L(He,"$nodes",c),l=()=>L($t,"$vlanLabelOrder",c),s=()=>L(oo,"$mode",c),a=()=>L(Ht,"$vlanLabels",c),[c,i]=De();let u=Y(()=>Ie(n())),d=window.__editNodeIndex??null,p=window.__newNodePosition??null,_=Y(()=>d!==null?r()[d]:null),y=te(ut((($=o(_))==null?void 0:$.name)??"")),f=te(ut(((R=o(_))==null?void 0:R.remote_desktop_address)??"")),T=te(ut(((B=o(_))==null?void 0:B.file_path)??"")),v=te(ut(((H=o(_))==null?void 0:H.web_config_url)??"")),b=te(ut({}));Nr(()=>{var z;const S={};for(const q of l())S[q]=((z=o(_))==null?void 0:z.vlans[q])??"";F(b,S,!0)});let x=te("");function w(){if(s()!=="Configuration"){F(x,"Switch to Configuration mode to save.");return}d!==null?(qt(d,{name:o(y),vlans:{...o(b)},remote_desktop_address:o(f),file_path:o(T),web_config_url:o(v)}),In.set(d)):o(y)&&p&&(Yl({name:o(y),x:p.x,y:p.y,vlans:{...o(b)},remote_desktop_address:o(f),file_path:o(T),web_config_url:o(v)}),In.set(r().length-1)),Te.set(null)}function N(){window.__editNodeIndex=null,window.__newNodePosition=null,Te.set(null)}let O="w-full px-2 py-1 text-sm rounded border outline-none";{let S=Y(()=>d!==null?"Edit Node":"Create Node");kt(e,{get title(){return o(S)},width:400,onClose:N,children:(z,q)=>{var P=Ua(),K=E(P),D=E(K);let I;var G=g(D,2);Q(G,1,de(O));let M;var X=g(K,2);Ae(X,1,l,$e,(Ne,he)=>{var Ve=$a(),Qe=E(Ve);let Wt;var it=E(Qe),vt=g(Qe,2);Q(vt,1,de(O));let Ct;j(()=>{Wt=h(Qe,"",Wt,{color:o(u).BUTTON_TEXT}),me(it,`${a()[o(he)]??o(he)??""}:`),Ct=h(vt,"",Ct,{"background-color":o(u).ENTRY_FOCUS_BG,color:o(u).ENTRY_TEXT,"border-color":o(u).CELL_BORDER})}),Yt(vt,()=>o(b)[o(he)],St=>o(b)[o(he)]=St),U(Ne,Ve)});var ee=g(X,2),ve=E(ee);let pe;var ae=g(ve,2);Q(ae,1,de(O));let ge;var ue=g(ee,2),ce=E(ue);let Be;var _e=g(ce,2);Q(_e,1,de(O));let k;var Ce=g(ue,2),Re=E(Ce);let fe;var Ge=g(Re,2);Q(Ge,1,de(O));let Xe;var Fe=g(Ce,2);{var Je=Ne=>{var he=Aa(),Ve=E(he);j(()=>me(Ve,o(x))),U(Ne,he)};se(Fe,Ne=>{o(x)&&Ne(Je)})}var Ke=g(Fe,2);Ke.__click=w;let et;j(()=>{I=h(D,"",I,{color:o(u).BUTTON_TEXT}),M=h(G,"",M,{"background-color":o(u).ENTRY_FOCUS_BG,color:o(u).ENTRY_TEXT,"border-color":o(u).CELL_BORDER}),pe=h(ve,"",pe,{color:o(u).BUTTON_TEXT}),ge=h(ae,"",ge,{"background-color":o(u).ENTRY_FOCUS_BG,color:o(u).ENTRY_TEXT,"border-color":o(u).CELL_BORDER}),Be=h(ce,"",Be,{color:o(u).BUTTON_TEXT}),k=h(_e,"",k,{"background-color":o(u).ENTRY_FOCUS_BG,color:o(u).ENTRY_TEXT,"border-color":o(u).CELL_BORDER}),fe=h(Re,"",fe,{color:o(u).BUTTON_TEXT}),Xe=h(Ge,"",Xe,{"background-color":o(u).ENTRY_FOCUS_BG,color:o(u).ENTRY_TEXT,"border-color":o(u).CELL_BORDER}),et=h(Ke,"",et,{"background-color":o(u).BUTTON_BG,color:o(u).BUTTON_TEXT})}),Yt(G,()=>o(y),Ne=>F(y,Ne)),Yt(ae,()=>o(f),Ne=>F(f,Ne)),Yt(_e,()=>o(T),Ne=>F(T,Ne)),Yt(Ge,()=>o(v),Ne=>F(v,Ne)),U(z,P)},$$slots:{default:!0}})}Ee(),i()}Se(["click"]);var Ia=Z('<div class="space-y-3"><div><label class="block text-xs mb-1">Label:</label> <input type="text"/></div> <div><label class="block text-xs mb-1">Info (on hover):</label> <input type="text"/></div> <button class="w-full py-2 text-sm rounded">OK</button></div>');function Ga(e,t){var v,b;ye(t,!0);const n=()=>L(ke,"$currentTheme",l),r=()=>L(_t,"$connections",l),[l,s]=De();let a=Y(()=>Ie(n())),c=window.__editConnectionIndex??null,i=window.__connectionFromIndex??0,u=window.__connectionToIndex??0,d=Y(()=>c!==null?r()[c]:null),p=te(ut(((v=o(d))==null?void 0:v.label)??"")),_=te(ut(((b=o(d))==null?void 0:b.connectioninfo)??""));function y(){c!==null?dr(c,{label:o(p),connectioninfo:o(_)||void 0}):Ni({from:i,to:u,label:o(p),connectioninfo:o(_)||void 0,label_pos:.5}),f()}function f(){window.__editConnectionIndex=null,window.__connectionFromIndex=null,window.__connectionToIndex=null,Te.set(null)}let T="w-full px-2 py-1 text-sm rounded border outline-none";kt(e,{title:"Connection Details",width:400,onClose:f,children:(x,w)=>{var N=Ia(),O=E(N),$=E(O);let R;var B=g($,2);Q(B,1,de(T));let H;var S=g(O,2),z=E(S);let q;var P=g(z,2);Q(P,1,de(T));let K;var D=g(S,2);D.__click=y;let I;j(()=>{R=h($,"",R,{color:o(a).BUTTON_TEXT}),H=h(B,"",H,{"background-color":o(a).ENTRY_FOCUS_BG,color:o(a).ENTRY_TEXT,"border-color":o(a).CELL_BORDER}),q=h(z,"",q,{color:o(a).BUTTON_TEXT}),K=h(P,"",K,{"background-color":o(a).ENTRY_FOCUS_BG,color:o(a).ENTRY_TEXT,"border-color":o(a).CELL_BORDER}),I=h(D,"",I,{"background-color":o(a).BUTTON_BG,color:o(a).BUTTON_TEXT})}),Yt(B,()=>o(p),G=>F(p,G)),Yt(P,()=>o(_),G=>F(_,G)),U(x,N)},$$slots:{default:!0}}),Ee(),s()}Se(["click"]);var Xa=Z('<div class="text-center"><p class="text-sm mb-4"> </p> <div class="flex justify-center gap-3"><button class="px-4 py-1.5 text-sm rounded">Yes</button> <button class="px-4 py-1.5 text-sm rounded">No</button> <button class="px-4 py-1.5 text-sm rounded">Cancel</button></div></div>');function Fa(e,t){ye(t,!0);const n=()=>L(ke,"$currentTheme",r),[r,l]=De();let s=Y(()=>Ie(n())),a=window.__confirmMessage??"Are you sure?",c=window.__confirmOnYes,i=window.__confirmOnNo;function u(){window.__confirmMessage=null,window.__confirmOnYes=null,window.__confirmOnNo=null,Te.set(null)}function d(){c==null||c(),u()}function p(){i==null||i(),u()}kt(e,{title:"",width:300,onClose:u,children:(_,y)=>{var f=Xa(),T=E(f);let v;var b=E(T),x=g(T,2),w=E(x);w.__click=d;let N;var O=g(w,2);O.__click=p;let $;var R=g(O,2);R.__click=u;let B;j(()=>{v=h(T,"",v,{color:o(s).BUTTON_TEXT}),me(b,a),N=h(w,"",N,{"background-color":o(s).BUTTON_BG,color:o(s).BUTTON_TEXT}),$=h(O,"",$,{"background-color":o(s).BUTTON_BG,color:o(s).BUTTON_TEXT}),B=h(R,"",B,{"background-color":o(s).BUTTON_BG,color:o(s).BUTTON_TEXT})}),U(_,f)},$$slots:{default:!0}}),Ee(),l()}Se(["click"]);var Pa=Z('<div class="space-y-3"><label class="block text-xs">Enter note text:</label> <input type="text" class="w-full px-2 py-1 text-sm rounded border outline-none"/> <div class="flex gap-2 justify-center"><button class="px-4 py-1.5 text-sm rounded">OK</button> <button class="px-4 py-1.5 text-sm rounded">Cancel</button></div></div>');function Ma(e,t){ye(t,!0);const n=()=>L(ke,"$currentTheme",r),[r,l]=De();let s=Y(()=>Ie(n())),a=te(""),c=window.__stickyNotePosition??{x:50,y:50};function i(){o(a).trim()&&Oi({text:o(a).trim(),x:c.x,y:c.y}),u()}function u(){window.__stickyNotePosition=null,Te.set(null)}kt(e,{title:"Sticky Note",width:320,onClose:u,children:(d,p)=>{var _=Pa(),y=E(_);let f;var T=g(y,2);let v;var b=g(T,2),x=E(b);x.__click=i;let w;var N=g(x,2);N.__click=u;let O;j(()=>{f=h(y,"",f,{color:o(s).BUTTON_TEXT}),v=h(T,"",v,{"background-color":o(s).ENTRY_FOCUS_BG,color:o(s).ENTRY_TEXT,"border-color":o(s).CELL_BORDER}),w=h(x,"",w,{"background-color":o(s).BUTTON_BG,color:o(s).BUTTON_TEXT}),O=h(N,"",O,{"background-color":o(s).BUTTON_BG,color:o(s).BUTTON_TEXT})}),Yt(T,()=>o(a),$=>F(a,$)),U(d,_)},$$slots:{default:!0}}),Ee(),l()}Se(["click"]);var Ya=Z('<th class="sticky top-0 px-2 py-1 text-left"> </th>'),Ha=Z('<td class="px-1 py-0.5"><input type="text"/></td>'),Va=Z('<tr><td class="px-1 py-0.5"><input type="text"/></td><td class="px-1 py-0.5"><input type="text"/></td><td class="px-1 py-0.5"><input type="text"/></td><!><td class="px-1 py-0.5"><input type="text"/></td><td class="px-1 py-0.5"><input type="text"/></td><td class="px-1 py-0.5"><input type="text"/></td><td class="px-1 py-0.5 text-center"><button class="text-red-500 hover:text-red-400 text-xs">Del</button></td></tr>'),za=Z('<div class="overflow-auto max-h-[60vh]"><table class="w-full text-xs border-collapse"><thead><tr><th class="sticky top-0 px-2 py-1 text-left">Name</th><th class="sticky top-0 px-2 py-1 text-left">X</th><th class="sticky top-0 px-2 py-1 text-left">Y</th><!><th class="sticky top-0 px-2 py-1 text-left">RDP</th><th class="sticky top-0 px-2 py-1 text-left">File</th><th class="sticky top-0 px-2 py-1 text-left">Web</th><th class="sticky top-0 px-2 py-1"></th></tr></thead><tbody></tbody></table></div> <div class="mt-3"><button class="px-3 py-1.5 text-xs rounded">Add Node</button></div>',1);function Wa(e,t){ye(t,!0);const n=()=>L(ke,"$currentTheme",a),r=()=>L($t,"$vlanLabelOrder",a),l=()=>L(He,"$nodes",a),s=()=>L(Ht,"$vlanLabels",a),[a,c]=De();let i=Y(()=>Ie(n()));function u(){Te.set(null)}function d(){Yl({name:"New Node",x:400,y:300,vlans:Object.fromEntries(r().map(f=>[f,""])),remote_desktop_address:"",file_path:"",web_config_url:""})}function p(f){Hl(f)}function _(f,T,v){const b=l()[f];if(b){if(T==="name")qt(f,{name:v});else if(T==="x")qt(f,{x:parseFloat(v)||0});else if(T==="y")qt(f,{y:parseFloat(v)||0});else if(T==="rdp")qt(f,{remote_desktop_address:v});else if(T==="file")qt(f,{file_path:v});else if(T==="web")qt(f,{web_config_url:v});else if(T.startsWith("VLAN_")){const x={...b.vlans,[T]:v};qt(f,{vlans:x})}}}let y="w-full px-1 py-0.5 text-xs border outline-none";kt(e,{title:"Node List Editor",width:900,onClose:u,children:(f,T)=>{var v=za(),b=Le(v),x=E(b),w=E(x),N=E(w),O=E(N);let $;var R=g(O);let B;var H=g(R);let S;var z=g(H);Ae(z,1,r,$e,(ge,ue)=>{var ce=Ya();let Be;var _e=E(ce);j(()=>{Be=h(ce,"",Be,{"background-color":o(i).HEADER_BG,color:o(i).HEADER_TEXT}),me(_e,s()[o(ue)]??o(ue))}),U(ge,ce)});var q=g(z);let P;var K=g(q);let D;var I=g(K);let G;var M=g(I);let X;var ee=g(w);Ae(ee,5,l,$e,(ge,ue,ce)=>{var Be=Va();let _e;var k=E(Be);let Ce;var Re=E(k);Q(Re,1,de(y)),Re.__change=Oe=>_(ce,"name",Oe.target.value);let fe;var Ge=g(k);let Xe;var Fe=E(Ge);Q(Fe,1,"w-full px-1 py-0.5 text-xs border outline-none w-16"),Fe.__change=Oe=>_(ce,"x",Oe.target.value);let Je;var Ke=g(Ge);let et;var Ne=E(Ke);Q(Ne,1,"w-full px-1 py-0.5 text-xs border outline-none w-16"),Ne.__change=Oe=>_(ce,"y",Oe.target.value);let he;var Ve=g(Ke);Ae(Ve,1,r,$e,(Oe,It)=>{var tt=Ha();let jt;var pt=E(tt);Q(pt,1,de(y)),pt.__change=ko=>_(ce,o(It),ko.target.value);let sn;j(()=>{jt=h(tt,"",jt,{border:`1px solid ${o(i).CELL_BORDER??""}`}),yt(pt,o(ue).vlans[o(It)]??""),sn=h(pt,"",sn,{"background-color":o(i).ENTRY_FOCUS_BG,color:o(i).ENTRY_TEXT,"border-color":o(i).CELL_BORDER})}),U(Oe,tt)});var Qe=g(Ve);let Wt;var it=E(Qe);Q(it,1,de(y)),it.__change=Oe=>_(ce,"rdp",Oe.target.value);let vt;var Ct=g(Qe);let St;var ln=E(Ct);Q(ln,1,de(y)),ln.__change=Oe=>_(ce,"file",Oe.target.value);let Fn;var C=g(Ct);let A;var V=E(C);Q(V,1,de(y)),V.__change=Oe=>_(ce,"web",Oe.target.value);let ne;var J=g(C);let xe;var Pe=E(J);Pe.__click=()=>p(ce),j((Oe,It)=>{_e=h(Be,"",_e,{"background-color":ce%2===0?o(i).ROW_BG_EVEN:o(i).ROW_BG_ODD}),Ce=h(k,"",Ce,{border:`1px solid ${o(i).CELL_BORDER??""}`}),yt(Re,o(ue).name),fe=h(Re,"",fe,{"background-color":o(i).ENTRY_FOCUS_BG,color:o(i).ENTRY_TEXT,"border-color":o(i).CELL_BORDER}),Xe=h(Ge,"",Xe,{border:`1px solid ${o(i).CELL_BORDER??""}`}),yt(Fe,Oe),Je=h(Fe,"",Je,{"background-color":o(i).ENTRY_FOCUS_BG,color:o(i).ENTRY_TEXT,"border-color":o(i).CELL_BORDER}),et=h(Ke,"",et,{border:`1px solid ${o(i).CELL_BORDER??""}`}),yt(Ne,It),he=h(Ne,"",he,{"background-color":o(i).ENTRY_FOCUS_BG,color:o(i).ENTRY_TEXT,"border-color":o(i).CELL_BORDER}),Wt=h(Qe,"",Wt,{border:`1px solid ${o(i).CELL_BORDER??""}`}),yt(it,o(ue).remote_desktop_address),vt=h(it,"",vt,{"background-color":o(i).ENTRY_FOCUS_BG,color:o(i).ENTRY_TEXT,"border-color":o(i).CELL_BORDER}),St=h(Ct,"",St,{border:`1px solid ${o(i).CELL_BORDER??""}`}),yt(ln,o(ue).file_path),Fn=h(ln,"",Fn,{"background-color":o(i).ENTRY_FOCUS_BG,color:o(i).ENTRY_TEXT,"border-color":o(i).CELL_BORDER}),A=h(C,"",A,{border:`1px solid ${o(i).CELL_BORDER??""}`}),yt(V,o(ue).web_config_url),ne=h(V,"",ne,{"background-color":o(i).ENTRY_FOCUS_BG,color:o(i).ENTRY_TEXT,"border-color":o(i).CELL_BORDER}),xe=h(J,"",xe,{border:`1px solid ${o(i).CELL_BORDER??""}`})},[()=>Math.round(o(ue).x),()=>Math.round(o(ue).y)]),U(ge,Be)});var ve=g(b,2),pe=E(ve);pe.__click=d;let ae;j(()=>{$=h(O,"",$,{"background-color":o(i).HEADER_BG,color:o(i).HEADER_TEXT}),B=h(R,"",B,{"background-color":o(i).HEADER_BG,color:o(i).HEADER_TEXT}),S=h(H,"",S,{"background-color":o(i).HEADER_BG,color:o(i).HEADER_TEXT}),P=h(q,"",P,{"background-color":o(i).HEADER_BG,color:o(i).HEADER_TEXT}),D=h(K,"",D,{"background-color":o(i).HEADER_BG,color:o(i).HEADER_TEXT}),G=h(I,"",G,{"background-color":o(i).HEADER_BG,color:o(i).HEADER_TEXT}),X=h(M,"",X,{"background-color":o(i).HEADER_BG,color:o(i).HEADER_TEXT}),ae=h(pe,"",ae,{"background-color":o(i).BUTTON_BG,color:o(i).BUTTON_TEXT})}),U(f,v)},$$slots:{default:!0}}),Ee(),c()}Se(["change","click"]);var ja=Z('<tr><td class="px-2 py-0.5"> </td><td class="px-2 py-0.5"> </td><td class="px-1 py-0.5"><input type="text"/></td><td class="px-1 py-0.5"><input type="text"/></td><td class="px-2 py-0.5 text-center"> </td><td class="px-1 py-0.5 text-center"><button class="text-red-500 hover:text-red-400 text-xs">Del</button></td></tr>'),qa=Z('<div class="overflow-auto max-h-[60vh]"><table class="w-full text-xs border-collapse"><thead><tr><th class="sticky top-0 px-2 py-1 text-left">From</th><th class="sticky top-0 px-2 py-1 text-left">To</th><th class="sticky top-0 px-2 py-1 text-left">Label</th><th class="sticky top-0 px-2 py-1 text-left">Info</th><th class="sticky top-0 px-2 py-1 text-left">Waypoints</th><th class="sticky top-0 px-2 py-1"></th></tr></thead><tbody></tbody></table></div>');function Ka(e,t){ye(t,!0);const n=()=>L(ke,"$currentTheme",s),r=()=>L(_t,"$connections",s),l=()=>L(He,"$nodes",s),[s,a]=De();let c=Y(()=>Ie(n()));function i(){Te.set(null)}function u(_,y,f){y==="label"?dr(_,{label:f}):y==="info"&&dr(_,{connectioninfo:f||void 0})}function d(_){_r(_)}let p="w-full px-1 py-0.5 text-xs border outline-none";kt(e,{title:"Connections List Editor",width:700,onClose:i,children:(_,y)=>{var f=qa(),T=E(f),v=E(T),b=E(v),x=E(b);let w;var N=g(x);let O;var $=g(N);let R;var B=g($);let H;var S=g(B);let z;var q=g(S);let P;var K=g(v);Ae(K,5,r,$e,(D,I,G)=>{var M=ja();let X;var ee=E(M);let ve;var pe=E(ee),ae=g(ee);let ge;var ue=E(ae),ce=g(ae);let Be;var _e=E(ce);Q(_e,1,de(p)),_e.__change=he=>u(G,"label",he.target.value);let k;var Ce=g(ce);let Re;var fe=E(Ce);Q(fe,1,de(p)),fe.__change=he=>u(G,"info",he.target.value);let Ge;var Xe=g(Ce);let Fe;var Je=E(Xe),Ke=g(Xe);let et;var Ne=E(Ke);Ne.__click=()=>d(G),j(()=>{var he,Ve,Qe;X=h(M,"",X,{"background-color":G%2===0?o(c).ROW_BG_EVEN:o(c).ROW_BG_ODD}),ve=h(ee,"",ve,{border:`1px solid ${o(c).CELL_BORDER??""}`,color:o(c).ENTRY_TEXT}),me(pe,((he=l()[o(I).from])==null?void 0:he.name)??`Node ${o(I).from}`),ge=h(ae,"",ge,{border:`1px solid ${o(c).CELL_BORDER??""}`,color:o(c).ENTRY_TEXT}),me(ue,((Ve=l()[o(I).to])==null?void 0:Ve.name)??`Node ${o(I).to}`),Be=h(ce,"",Be,{border:`1px solid ${o(c).CELL_BORDER??""}`}),yt(_e,o(I).label),k=h(_e,"",k,{"background-color":o(c).ENTRY_FOCUS_BG,color:o(c).ENTRY_TEXT,"border-color":o(c).CELL_BORDER}),Re=h(Ce,"",Re,{border:`1px solid ${o(c).CELL_BORDER??""}`}),yt(fe,o(I).connectioninfo??""),Ge=h(fe,"",Ge,{"background-color":o(c).ENTRY_FOCUS_BG,color:o(c).ENTRY_TEXT,"border-color":o(c).CELL_BORDER}),Fe=h(Xe,"",Fe,{border:`1px solid ${o(c).CELL_BORDER??""}`,color:o(c).ENTRY_TEXT}),me(Je,((Qe=o(I).waypoints)==null?void 0:Qe.length)??0),et=h(Ke,"",et,{border:`1px solid ${o(c).CELL_BORDER??""}`})}),U(D,M)}),j(()=>{w=h(x,"",w,{"background-color":o(c).HEADER_BG,color:o(c).HEADER_TEXT}),O=h(N,"",O,{"background-color":o(c).HEADER_BG,color:o(c).HEADER_TEXT}),R=h($,"",R,{"background-color":o(c).HEADER_BG,color:o(c).HEADER_TEXT}),H=h(B,"",H,{"background-color":o(c).HEADER_BG,color:o(c).HEADER_TEXT}),z=h(S,"",z,{"background-color":o(c).HEADER_BG,color:o(c).HEADER_TEXT}),P=h(q,"",P,{"background-color":o(c).HEADER_BG,color:o(c).HEADER_TEXT})}),U(_,f)},$$slots:{default:!0}}),Ee(),a()}Se(["change","click"]);var Za=Z('<button class="px-2 py-1 text-xs rounded border-2"> </button>'),Ja=Z('<div class="p-3 rounded"><div class="flex items-center gap-2 mb-2"><input type="text"/> <button class="text-red-500 hover:text-red-400 text-xs px-2">Delete</button></div> <div class="flex flex-wrap gap-2"></div></div>'),Qa=Z(`<p class="text-sm opacity-60">No groups yet. Use Groups mode to draw group rectangles on
        the canvas.</p>`),ec=Z('<div class="space-y-4"><!> <!></div>');function tc(e,t){ye(t,!0);const n=()=>L(ke,"$currentTheme",a),r=()=>L(Oo,"$groupColorPresets",a),l=()=>L(yn,"$groups",a),s=()=>L(Ml,"$isDark",a),[a,c]=De();let i=Y(()=>Ie(n()));function u(){Te.set(null)}function d(f,T){Yr(f,{name:T})}function p(f,T){const v=r().find(b=>b.id===T);v&&Yr(f,{color_preset_id:T,light_bg:v.light_bg,light_border:v.light_border,dark_bg:v.dark_bg,dark_border:v.dark_border})}function _(f){Ri(f)}let y="w-full px-2 py-1 text-xs rounded border outline-none";kt(e,{title:"Group Editor",width:500,onClose:u,children:(f,T)=>{var v=ec(),b=E(v);Ae(b,1,l,$e,(N,O,$)=>{var R=Ja();let B;var H=E(R),S=E(H);Q(S,1,de(y)),S.__change=K=>d($,K.target.value);let z;var q=g(S,2);q.__click=()=>_($);var P=g(H,2);Ae(P,5,r,$e,(K,D)=>{var I=Za();I.__click=()=>p($,o(D).id);let G;var M=E(I);j(()=>{G=h(I,"",G,{"background-color":s()?o(D).dark_bg:o(D).light_bg,"border-color":o(O).color_preset_id===o(D).id?o(i).NODE_HIGHLIGHT:s()?o(D).dark_border:o(D).light_border,color:o(i).BUTTON_TEXT}),me(M,o(D).name)}),U(K,I)}),j(()=>{B=h(R,"",B,{border:`1px solid ${o(i).BORDER_COLOR??""}`,"background-color":o(i).ROW_BG_EVEN}),yt(S,o(O).name),z=h(S,"",z,{"background-color":o(i).ENTRY_FOCUS_BG,color:o(i).ENTRY_TEXT,"border-color":o(i).CELL_BORDER})}),U(N,R)});var x=g(b,2);{var w=N=>{var O=Qa();let $;j(()=>$=h(O,"",$,{color:o(i).INFO_TEXT})),U(N,O)};se(x,N=>{l().length===0&&N(w)})}U(f,v)},$$slots:{default:!0}}),Ee(),c()}Se(["change","click"]);var nc=Z('<div class="flex items-center gap-2"><span class="text-xs opacity-60 w-20 shrink-0"> </span> <input type="text"/> <button class="text-xs px-1 hover:opacity-70">&#9650;</button> <button class="text-xs px-1 hover:opacity-70">&#9660;</button> <button class="text-xs text-red-500 hover:text-red-400 px-1">X</button></div>'),oc=Z('<div class="space-y-2"></div> <div class="mt-4"><button class="px-3 py-1.5 text-xs rounded">Add VLAN</button></div>',1);function rc(e,t){ye(t,!0);const n=()=>L(ke,"$currentTheme",a),r=()=>L(Ht,"$vlanLabels",a),l=()=>L(He,"$nodes",a),s=()=>L($t,"$vlanLabelOrder",a),[a,c]=De();let i=Y(()=>Ie(n()));function u(){Te.set(null)}function d(T,v){Ht.update(b=>({...b,[T]:v}))}function p(){const T=Object.keys(r());let v=1;for(;T.includes(`VLAN_${v}`);)v++;const b=`VLAN_${v}`;Ht.update(w=>({...w,[b]:b})),$t.update(w=>[...w,b]),l().forEach((w,N)=>{b in w.vlans||qt(N,{vlans:{...w.vlans,[b]:""}})})}function _(T){Ht.update(v=>{const b={...v};return delete b[T],b}),$t.update(v=>v.filter(b=>b!==T))}function y(T,v){$t.update(b=>{const x=b.indexOf(T);if(x<0)return b;const w=[...b],N=v==="up"?x-1:x+1;return N<0||N>=w.length?b:([w[x],w[N]]=[w[N],w[x]],w)})}let f="w-full px-2 py-1 text-xs rounded border outline-none";kt(e,{title:"VLAN Configuration",width:400,onClose:u,children:(T,v)=>{var b=oc(),x=Le(b);Ae(x,5,s,$e,($,R,B)=>{var H=nc(),S=E(H);let z;var q=E(S),P=g(S,2);Q(P,1,de(f)),P.__change=ee=>d(o(R),ee.target.value);let K;var D=g(P,2);D.__click=()=>y(o(R),"up"),D.disabled=B===0;let I;var G=g(D,2);G.__click=()=>y(o(R),"down");let M;var X=g(G,2);X.__click=()=>_(o(R)),j(()=>{z=h(S,"",z,{color:o(i).INFO_TEXT}),me(q,`${o(R)??""}:`),yt(P,r()[o(R)]??o(R)),K=h(P,"",K,{"background-color":o(i).ENTRY_FOCUS_BG,color:o(i).ENTRY_TEXT,"border-color":o(i).CELL_BORDER}),I=h(D,"",I,{color:o(i).BUTTON_TEXT}),G.disabled=B===s().length-1,M=h(G,"",M,{color:o(i).BUTTON_TEXT})}),U($,H)});var w=g(x,2),N=E(w);N.__click=p;let O;j(()=>O=h(N,"",O,{"background-color":o(i).BUTTON_BG,color:o(i).BUTTON_TEXT})),U(T,b)},$$slots:{default:!0}}),Ee(),c()}Se(["change","click"]);var lc=Z('<div class="space-y-3"><label class="flex items-center gap-2 text-sm"><input type="checkbox"/> Show Connections</label> <label class="flex items-center gap-2 text-sm"><input type="checkbox"/> Show Connection Labels</label> <label class="flex items-center gap-2 text-sm"><input type="checkbox"/> Show Sticky Notes</label> <label class="flex items-center gap-2 text-sm"><input type="checkbox"/> Show Groups</label> <div><label class="block text-sm mb-1"> </label> <input type="range" min="8" max="32" class="w-full"/></div></div>');function sc(e,t){ye(t,!0);const n=()=>L(ke,"$currentTheme",l),r=()=>L(Dn,"$displayOptions",l),[l,s]=De();let a=Y(()=>Ie(n()));function c(){Te.set(null)}function i(d){Dn.update(p=>({...p,[d]:!p[d]}))}function u(d){Dn.update(p=>({...p,node_size:d}))}kt(e,{title:"Display Options",width:350,onClose:c,children:(d,p)=>{var _=lc(),y=E(_);let f;var T=E(y);T.__change=()=>i("show_connections");var v=g(y,2);let b;var x=E(v);x.__change=()=>i("show_connection_labels");var w=g(v,2);let N;var O=E(w);O.__change=()=>i("show_notes");var $=g(w,2);let R;var B=E($);B.__change=()=>i("show_groups");var H=g($,2),S=E(H);let z;var q=E(S),P=g(S,2);P.__input=K=>u(parseInt(K.target.value)),j(()=>{f=h(y,"",f,{color:o(a).BUTTON_TEXT}),co(T,r().show_connections!==!1),b=h(v,"",b,{color:o(a).BUTTON_TEXT}),co(x,r().show_connection_labels!==!1),N=h(w,"",N,{color:o(a).BUTTON_TEXT}),co(O,r().show_notes!==!1),R=h($,"",R,{color:o(a).BUTTON_TEXT}),co(B,r().show_groups!==!1),z=h(S,"",z,{color:o(a).BUTTON_TEXT}),me(q,`Node Size: ${r().node_size??14??""}`),yt(P,r().node_size??14)}),U(d,_)},$$slots:{default:!0}}),Ee(),s()}Se(["change","input"]);var ic=Z('<button class="w-full text-left px-2 py-1 text-xs rounded"> </button>'),ac=Z('<label class="flex items-center gap-2 text-xs"><input type="checkbox"/> </label>'),cc=Z('<div class="max-h-32 overflow-auto p-2 rounded"></div>'),uc=Z('<div class="space-y-3"><div><label class="block text-xs mb-1">Name:</label> <input type="text"/></div> <div><label class="block text-xs mb-1">Template:</label> <textarea></textarea> <p class="text-xs opacity-50 mt-1">Available: &#123;ip&#125;, &#123;name&#125;, &#123;file&#125;, &#123;web&#125;, &#123;rdp&#125;, &#123;vlan_N&#125;</p></div> <div><label class="flex items-center gap-2 text-xs"><input type="checkbox"/> Apply to all nodes</label></div> <!> <div class="flex gap-2"><button class="px-3 py-1.5 text-xs rounded">Save</button> <button class="px-3 py-1.5 text-xs rounded text-red-500">Delete</button></div></div>'),fc=Z('<p class="text-xs opacity-60">Select a command to edit or add a new one.</p>'),dc=Z('<div class="flex gap-4"><div class="w-1/3 space-y-1"><!> <button class="w-full text-left px-2 py-1 text-xs rounded mt-2">+ Add Command</button></div> <div class="flex-1"><!></div></div>');function _c(e,t){ye(t,!0);const n=()=>L(ke,"$currentTheme",s),r=()=>L(fn,"$customCommands",s),l=()=>L(He,"$nodes",s),[s,a]=De();let c=Y(()=>Ie(n())),i=te(null),u=te(""),d=te(""),p=te(!0),_=te(ut([]));function y(){Te.set(null)}function f(N){F(i,N,!0);const O=r()[N];if(F(u,N,!0),typeof O=="string")F(d,O,!0),F(p,!0),F(_,[],!0);else{F(d,O.template,!0);const $=O.applicable_nodes;F(p,$===null),F(_,$??[],!0)}}function T(){const N="New Command";fn.update(O=>({...O,[N]:{template:"",applicable_nodes:null}})),f(N)}function v(){!o(i)||!o(u)||(fn.update(N=>{const O={...N};return o(i)!==o(u)&&delete O[o(i)],O[o(u)]={template:o(d),applicable_nodes:o(p)?null:o(_)},O}),F(i,o(u),!0))}function b(){o(i)&&(fn.update(N=>{const O={...N};return delete O[o(i)],O}),F(i,null))}function x(N){o(_).includes(N)?F(_,o(_).filter(O=>O!==N),!0):F(_,[...o(_),N],!0)}let w="w-full px-2 py-1 text-xs rounded border outline-none";kt(e,{title:"Custom Commands",width:600,onClose:y,children:(N,O)=>{var $=dc(),R=E($),B=E(R);Ae(B,1,()=>Object.keys(r()),$e,(D,I)=>{var G=ic();G.__click=()=>f(o(I));let M;var X=E(G);j(()=>{M=h(G,"",M,{"background-color":o(i)===o(I)?o(c).BUTTON_ACTIVE_BG:o(c).BUTTON_BG,color:o(c).BUTTON_TEXT}),me(X,o(I))}),U(D,G)});var H=g(B,2);H.__click=T;let S;var z=g(R,2),q=E(z);{var P=D=>{var I=uc(),G=E(I),M=E(G);let X;var ee=g(M,2);Q(ee,1,de(w));let ve;var pe=g(G,2),ae=E(pe);let ge;var ue=g(ae,2);Q(ue,1,"w-full px-2 py-1 text-xs rounded border outline-none h-20 resize-y");let ce;var Be=g(ue,2);let _e;var k=g(pe,2),Ce=E(k);let Re;var fe=E(Ce),Ge=g(k,2);{var Xe=he=>{var Ve=cc();let Qe;Ae(Ve,5,l,$e,(Wt,it)=>{var vt=ac();let Ct;var St=E(vt);St.__change=()=>x(o(it).name);var ln=g(St);j(Fn=>{Ct=h(vt,"",Ct,{color:o(c).BUTTON_TEXT}),co(St,Fn),me(ln,` ${o(it).name??""}`)},[()=>o(_).includes(o(it).name)]),U(Wt,vt)}),j(()=>Qe=h(Ve,"",Qe,{"background-color":o(c).ROW_BG_EVEN,border:`1px solid ${o(c).CELL_BORDER??""}`})),U(he,Ve)};se(Ge,he=>{o(p)||he(Xe)})}var Fe=g(Ge,2),Je=E(Fe);Je.__click=v;let Ke;var et=g(Je,2);et.__click=b;let Ne;j(()=>{X=h(M,"",X,{color:o(c).BUTTON_TEXT}),ve=h(ee,"",ve,{"background-color":o(c).ENTRY_FOCUS_BG,color:o(c).ENTRY_TEXT,"border-color":o(c).CELL_BORDER}),ge=h(ae,"",ge,{color:o(c).BUTTON_TEXT}),ce=h(ue,"",ce,{"background-color":o(c).ENTRY_FOCUS_BG,color:o(c).ENTRY_TEXT,"border-color":o(c).CELL_BORDER}),_e=h(Be,"",_e,{color:o(c).INFO_TEXT}),Re=h(Ce,"",Re,{color:o(c).BUTTON_TEXT}),Ke=h(Je,"",Ke,{"background-color":o(c).BUTTON_BG,color:o(c).BUTTON_TEXT}),Ne=h(et,"",Ne,{"background-color":o(c).BUTTON_BG})}),Yt(ee,()=>o(u),he=>F(u,he)),Yt(ue,()=>o(d),he=>F(d,he)),bi(fe,()=>o(p),he=>F(p,he)),U(D,I)},K=D=>{var I=fc();let G;j(()=>G=h(I,"",G,{color:o(c).INFO_TEXT})),U(D,I)};se(q,D=>{o(i)?D(P):D(K,!1)})}j(()=>S=h(H,"",S,{"background-color":o(c).BUTTON_BG,color:o(c).BUTTON_TEXT})),U(N,$)},$$slots:{default:!0}}),Ee(),a()}Se(["click","change"]);var vc=Z('<button class="px-3 py-1.5 text-xs rounded"> </button>'),pc=Z('<div class="flex items-center gap-2 text-xs"><div class="w-5 h-5 rounded border shrink-0"></div> <span> </span></div>'),hc=Z('<div class="space-y-1"><div class="flex gap-2 mb-3"></div> <!></div>');function bc(e,t){ye(t,!0);const n=()=>L(ke,"$currentTheme",r),[r,l]=De(),s=[{name:"light",label:"Light"},{name:"dark",label:"Dark"},{name:"ironclad",label:"Ironclad"}];let a=Y(()=>Ie(n()));function c(){Te.set(null)}let i=Y(()=>Object.keys(o(a)));kt(e,{title:"Color Scheme",width:400,onClose:c,children:(u,d)=>{var p=hc(),_=E(p);Ae(_,21,()=>s,$e,(f,T)=>{var v=vc();v.__click=()=>ke.set(o(T).name);let b;var x=E(v);j(()=>{b=h(v,"",b,{"background-color":n()===o(T).name?o(a).BUTTON_ACTIVE_BG:o(a).BUTTON_BG,color:o(a).BUTTON_TEXT}),me(x,o(T).label)}),U(f,v)});var y=g(_,2);Ae(y,17,()=>o(i),$e,(f,T)=>{var v=pc(),b=E(v);let x;var w=g(b,2);let N;var O=E(w);j(()=>{x=h(b,"",x,{"background-color":o(a)[o(T)],"border-color":o(a).CELL_BORDER}),N=h(w,"",N,{color:o(a).BUTTON_TEXT}),me(O,o(T))}),U(f,v)}),U(u,p)},$$slots:{default:!0}}),Ee(),l()}Se(["click"]);var gc=Z('<div class="flex flex-col w-full h-full"><!> <!> <div class="relative flex-1 overflow-hidden"><!> <!> <!> <!></div></div> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!>',1);function Tc(e,t){ye(t,!0);const n=()=>L(ke,"$currentTheme",s),r=()=>L(Uo,"$showStartMenu",s),l=()=>L(Te,"$activeDialog",s),[s,a]=De();xo(()=>{const k=document.documentElement;switch(k.classList.remove("light","dark","theme-ironclad"),n()){case"ironclad":k.classList.add("theme-ironclad");break;case"dark":k.classList.add("dark");break;default:k.classList.add("light");break}});function c(k){var Re;const Ce=(Re=k.target)==null?void 0:Re.tagName;if(!(Ce==="INPUT"||Ce==="TEXTAREA"||Ce==="SELECT"))if(k.ctrlKey&&k.shiftKey&&k.key==="C"){k.preventDefault();const fe=["dark","ironclad","light"];ke.update(Ge=>{const Xe=fe.indexOf(Ge);return fe[(Xe+1)%fe.length]})}else k.ctrlKey&&k.key==="s"?(k.preventDefault(),ql()):k.ctrlKey&&k.key==="l"?(k.preventDefault(),vr()):k.key==="F1"&&(k.preventDefault(),Te.set("help"))}Nr(async()=>{try{await vr("/Users/mark/Code/3rd-party/NodeSailor-Vibed/NodeSailor/example network.json")}catch(k){console.error("Auto-load failed:",k),Uo.set(!0)}});let i=Y(()=>Ie(n()));var u=gc();zo("keydown",po,c);var d=Le(u);let p;var _=E(d);sa(_,{});var y=g(_,2);va(y,{});var f=g(y,2),T=E(f);Ki(T,{});var v=g(T,2);ua(v,{});var b=g(v,2);da(b,{});var x=g(b,2);ya(x,{});var w=g(d,2);{var N=k=>{Ra(k,{})};se(w,k=>{r()&&k(N)})}var O=g(w,2);{var $=k=>{Da(k,{})};se(O,k=>{l()==="help"&&k($)})}var R=g(O,2);{var B=k=>{Sa(k,{})};se(R,k=>{l()==="nodeEditor"&&k(B)})}var H=g(R,2);{var S=k=>{Ga(k,{})};se(H,k=>{l()==="connectionEditor"&&k(S)})}var z=g(H,2);{var q=k=>{Fa(k,{})};se(z,k=>{l()==="confirm"&&k(q)})}var P=g(z,2);{var K=k=>{Ma(k,{})};se(P,k=>{l()==="stickyNote"&&k(K)})}var D=g(P,2);{var I=k=>{Wa(k,{})};se(D,k=>{l()==="nodeList"&&k(I)})}var G=g(D,2);{var M=k=>{Ka(k,{})};se(G,k=>{l()==="connectionList"&&k(M)})}var X=g(G,2);{var ee=k=>{tc(k,{})};se(X,k=>{l()==="groupEditor"&&k(ee)})}var ve=g(X,2);{var pe=k=>{rc(k,{})};se(ve,k=>{l()==="vlanConfig"&&k(pe)})}var ae=g(ve,2);{var ge=k=>{sc(k,{})};se(ae,k=>{l()==="displayOptions"&&k(ge)})}var ue=g(ae,2);{var ce=k=>{_c(k,{})};se(ue,k=>{l()==="customCommands"&&k(ce)})}var Be=g(ue,2);{var _e=k=>{bc(k,{})};se(Be,k=>{l()==="colorScheme"&&k(_e)})}j(()=>p=h(d,"",p,{"background-color":o(i).FRAME_BG})),U(e,u),Ee(),a()}ri(Tc,{target:document.getElementById("app")});
